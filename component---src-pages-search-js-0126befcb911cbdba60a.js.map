{"version":3,"sources":["webpack:////Volumes/Data/working/Unitz/ws-app-web/node_modules/formik-antd/es/slider/index.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/SearchPage/View.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/SearchPage/Data.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/SearchPage/index.js","webpack:///./src/pages/search.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/withPageContext.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/node_modules/formik-antd/es/select/index.js"],"names":["Slider","_a","name","validate","fast","_onChange","onChange","restProps","_ref","value","field","_ref$form","form","setFieldValue","setFieldTouched","Object","assign","valueOf","Index","props","DIV","className","HeroSection","RESABLE","ctx","debug","categories","resable","for","get","set","AdvisorSearchForm","Data","bindings","pageContainer","rules","data","hook","allContentfulCategory","apply","catListFilterStr","map","item","join","usePromiseSource","a","CategoryModel","find","toObject","priceRangeOptions","options","min","max","step","defaultValue","advisorSearchForm","route","useRoute","useFormik","initialValues","category","service","priceRange","onSubmit","values","actions","minPrice","maxPrice","navigate","to","error","setStatus","validationSchema","Yup","shape","isLoading","display","notLoading","View","SearchIndex","withPageContext","location","PageData","SEO","pageData","POS","SearchPage","DataContext","React","createContext","provideData","dataKey","dataContext","useContext","Comp","pageContext","setPageContext","Provider","Select","children","_onBlur","onBlur","option","undefined","Option","OptGroup"],"mappings":"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","file":"component---src-pages-search-js-0126befcb911cbdba60a.js","sourcesContent":["import { __rest } from \"tslib\";\nimport { Slider as $Slider } from 'antd';\nimport * as React from 'react';\nimport Field from '../field';\nexport var Slider = function Slider(_a) {\n  var name = _a.name,\n      validate = _a.validate,\n      fast = _a.fast,\n      _onChange = _a.onChange,\n      restProps = __rest(_a, [\"name\", \"validate\", \"fast\", \"onChange\"]);\n\n  return React.createElement(Field, {\n    name: name,\n    validate: validate,\n    fast: fast\n  }, function (_ref) {\n    var value = _ref.field.value,\n        _ref$form = _ref.form,\n        setFieldValue = _ref$form.setFieldValue,\n        setFieldTouched = _ref$form.setFieldTouched;\n    return React.createElement($Slider, Object.assign({\n      value: value,\n      onChange: function onChange(value) {\n        setFieldValue(name, value != null ? value.valueOf() : value);\n        setFieldTouched(name, true, false);\n        _onChange && _onChange(value);\n      }\n    }, restProps));\n  });\n};\nexport default Slider;","import React from 'react';\n\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport { resable } from '@vl/redata/RESABLE';\nimport RESABLE from '@vl/redata/RESABLE.macro';\nimport HeroSection from '@uz/unitz-components-web/HeroSection';\nimport AdvisorSearchForm from '@uz/unitz-components-web/AdvisorSearchForm';\n\nconst Index = (props) => {\n  // @TODO: validate missing required input\n  return (\n    <DIV className=\"pageContainer\">\n      <div className=\"relative none-container\">\n        <HeroSection />\n        <div className=\"absolute w-full bottom-12\">\n          <RESABLE>\n            <DIV>\n              {ctx.debug(() => {\n                const categories = resable.for('categories')(ctx.get('categories'), []);\n                ctx.set('categories', categories);\n              })}\n              <AdvisorSearchForm />\n            </DIV>\n          </RESABLE>\n        </div>\n      </div>\n    </DIV>\n  );\n};\n\nexport default Index;\n","import { bindings, hook } from '@vl/redata';\nimport _ from 'lodash';\nimport CategoryModel from '@uz/unitz-models/CategoryModel';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport useRoute from '@vl/hooks/useGbRoute';\nimport usePromiseSource from '@vl/hooks/usePromiseSource';\n\nconst bindData = bindings({\n  pageContainer: {\n    rules: [\n      [\n        'data',\n        {\n          data: {\n            categories: hook((ctx) => {\n              const allContentfulCategory = ctx.apply('ctf.getNodes', 'allContentfulCategory.nodes', []);\n              const catListFilterStr = _.map(allContentfulCategory, 'id')\n                .map((item) => `\"${item}\"`)\n                .join(',');\n\n              const categories = usePromiseSource(\n                () => async () => {\n                  try {\n                    const categories = await CategoryModel.find(\n                      `where: { id: {_in: [${catListFilterStr}]}}, limit: 20`,\n                      'id avatar_url display_name icon slug'\n                    );\n                    return categories.toObject();\n                  } catch (err) {}\n                },\n                [],\n                []\n              );\n              return categories;\n            }),\n            priceRangeOptions: hook(() => {\n              const options = {\n                min: 100000,\n                max: 5000000,\n              };\n              options.step = (options.max - options.min) / 20;\n              options.defaultValue = [options.min + options.step, options.max - options.step];\n\n              return options;\n            }),\n\n            advisorSearchForm: hook((ctx) => {\n              const route = useRoute();\n              const form = useFormik({\n                initialValues: {\n                  category: '',\n                  service: '',\n                  priceRange: ctx.get('priceRangeOptions.defaultValue'),\n                },\n                onSubmit: async (values, actions) => {\n                  try {\n                    const { priceRange } = values;\n                    const [minPrice, maxPrice] = priceRange;\n                    route.navigate(\n                      route.to('/filter', {\n                        ..._.omit(values, ['priceRange']),\n                        min: minPrice,\n                        max: maxPrice,\n                      })\n                    );\n                  } catch (error) {\n                    actions.setStatus({\n                      error,\n                    });\n                  }\n                },\n                validationSchema: Yup.object().shape({}),\n              });\n              return form;\n            }),\n          },\n        },\n      ],\n    ],\n  },\n  isLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n  notLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => !ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n});\n\nexport default bindData;\n","import View from './View.js';\nimport Data from './Data.js';\n\nexport default Data(View);\n","import React from 'react';\n\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\n\nimport App from '@uz/unitz-app-web/UserApp';\nimport SEO from '@uz/unitz-layout-web/SEO';\n\nimport Layout from '@uz/unitz-layout-web/LayoutMain';\n\nimport SearchPage from '@uz/unitz-pages/SearchPage';\nimport withPageContext from '@uz/unitz-pages/withPageContext';\n\nimport PageData from '../data/PageDataQuery';\n\nconst SearchIndex = withPageContext((props) => {\n  return (\n    <App>\n      <Layout location={props.location} PageData={PageData}>\n        <DIV>\n          <SEO pageData={ctx.apply('ctf.findPage', { name: 'Homepage' })} />\n          <Layout.POS name=\"app-header\">{ctx.apply('ctf.renderSection', { name: 'articleNavbarSection' })}</Layout.POS>\n          <Layout.POS name=\"app-body\">\n            <SearchPage />\n          </Layout.POS>\n          <Layout.POS name=\"app-footer\">{ctx.apply('ctf.renderSection', { name: 'articleFooterSection' })}</Layout.POS>\n        </DIV>\n      </Layout>\n    </App>\n  );\n});\n\nexport default SearchIndex;\n","import React from 'react';\n\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\n\nimport _ from 'lodash';\nimport useRoute from '@vl/hooks/useGbRoute';\n\nexport const DataContext = React.createContext();\n\nexport const provideData = (dataKey, value) => {\n  const dataContext = React.useContext(DataContext);\n  _.set(dataContext, dataKey, value);\n};\n\nexport const consumeData = (dataKey) => {\n  const dataContext = React.useContext(DataContext);\n  return _.get(dataContext, dataKey);\n};\n\nconst withPageContext = (Comp) => {\n  return (props) => {\n    const pageContext = _.get(props, 'pageContext');\n    // eslint-disable-next-line\n    const route = useRoute();\n    route.setPageContext(pageContext);\n    return (\n      <DataContext.Provider value={{}}>\n        <DIV>\n          {ctx.debug(() => {\n            ctx.set('pageContext', pageContext);\n          })}\n          <Comp {...props} />\n        </DIV>\n      </DataContext.Provider>\n    );\n  };\n};\n\nexport default withPageContext;\n","import { __rest } from \"tslib\";\nimport { Select as $Select } from 'antd';\nimport * as React from 'react';\nimport Field from '../field'; // declare class Select<ValueType extends SelectValue = SelectValue> extends React.Component<SelectProps<ValueType>> {\n\nexport var Select = function Select(_a) {\n  var name = _a.name,\n      validate = _a.validate,\n      fast = _a.fast,\n      children = _a.children,\n      _onChange = _a.onChange,\n      _onBlur = _a.onBlur,\n      restProps = __rest(_a, [\"name\", \"validate\", \"fast\", \"children\", \"onChange\", \"onBlur\"]);\n\n  return React.createElement(Field, {\n    name: name,\n    validate: validate,\n    fast: fast\n  }, function (_ref) {\n    var value = _ref.field.value,\n        _ref$form = _ref.form,\n        setFieldValue = _ref$form.setFieldValue,\n        setFieldTouched = _ref$form.setFieldTouched;\n    return React.createElement($Select, Object.assign({\n      onChange: function onChange(value, option) {\n        setFieldValue(name, value);\n        _onChange && _onChange(value, option);\n      },\n      onBlur: function onBlur(value) {\n        setFieldTouched(name);\n        _onBlur && _onBlur(value);\n      },\n      // setting undefined will show the placeholder\n      value: value === '' || value === null ? undefined : value\n    }, restProps), children);\n  });\n};\nexport default Select;\nSelect.Option = $Select.Option;\nSelect.OptGroup = $Select.OptGroup;"],"sourceRoot":""}