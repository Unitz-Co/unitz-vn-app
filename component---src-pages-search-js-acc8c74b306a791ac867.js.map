{"version":3,"sources":["webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/SearchPage/View.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/SearchPage/Data.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/SearchPage/index.js","webpack:///./src/pages/search.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/node_modules/lodash/negate.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/node_modules/lodash/reject.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/redata/RESABLE.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/hooks/usePromiseSource.js"],"names":["Index","props","DIV","className","HeroSection","RESABLE","ctx","debug","categories","resable","for","get","set","AdvisorSearchForm","Data","bindings","pageContainer","rules","data","hook","allContentfulCategory","apply","catListFilterStr","map","item","join","usePromiseSource","a","CategoryModel","find","toObject","priceRangeOptions","options","min","max","step","defaultValue","advisorSearchForm","route","useRoute","useFormik","initialValues","category","service","priceRange","onSubmit","values","actions","minPrice","maxPrice","navigate","to","error","setStatus","validationSchema","Yup","shape","isLoading","display","notLoading","View","SearchIndex","location","PageData","SEO","pageData","name","POS","SearchPage","module","exports","predicate","TypeError","args","arguments","length","call","this","arrayFilter","baseFilter","baseIteratee","isArray","negate","collection","Stream","listeners","emit","event","params","listener","on","val","concat","proxy","stream","events","dispoers","dis","resolveFunc","fn","children","loading","React","useState","v","$v","ref","useRef","listPromise","listStream","listStreamSubscriber","listObservable","listSubscription","listData","listOpts","disposers","current","useMemo","push","Object","keys","key","sub","subscribe","prevData","useEffect","forEach","unsubscribe","resolvePromiseGen","useCallback","index","getAutoKey","prefix","resolver","def","keyId","opts","obj","then","resolvePromise","isObservable","resolveObservable","isStream","resolveStream","next","isIterator","promise","deps","$val","newVal"],"mappings":"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","file":"component---src-pages-search-js-acc8c74b306a791ac867.js","sourcesContent":["import React from 'react';\n\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport { resable } from '@vl/redata/RESABLE';\nimport RESABLE from '@vl/redata/RESABLE.macro';\nimport HeroSection from '@uz/unitz-components-web/HeroSection';\nimport AdvisorSearchForm from '@uz/unitz-components-web/AdvisorSearchForm';\n\nconst Index = (props) => {\n  // @TODO: validate missing required input\n  return (\n    <DIV className=\"pageContainer\">\n      <div className=\"relative none-container\">\n        <HeroSection />\n        <div className=\"absolute w-full bottom-12\">\n          <RESABLE>\n            <DIV>\n              {ctx.debug(() => {\n                const categories = resable.for('categories')(ctx.get('categories'), []);\n                ctx.set('categories', categories);\n              })}\n              <AdvisorSearchForm />\n            </DIV>\n          </RESABLE>\n        </div>\n      </div>\n    </DIV>\n  );\n};\n\nexport default Index;\n","import { bindings, hook } from '@vl/redata';\nimport _ from 'lodash';\nimport CategoryModel from '@uz/unitz-models/CategoryModel';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport useRoute from '@vl/hooks/useGbRoute';\nimport usePromiseSource from '@vl/hooks/usePromiseSource';\n\nconst bindData = bindings({\n  pageContainer: {\n    rules: [\n      [\n        'data',\n        {\n          data: {\n            categories: hook((ctx) => {\n              const allContentfulCategory = ctx.apply('ctf.getNodes', 'allContentfulCategory.nodes', []);\n              const catListFilterStr = _.map(allContentfulCategory, 'id')\n                .map((item) => `\"${item}\"`)\n                .join(',');\n\n              const categories = usePromiseSource(\n                () => async () => {\n                  try {\n                    const categories = await CategoryModel.find(\n                      `where: { id: {_in: [${catListFilterStr}]}}, limit: 20`,\n                      'id avatar_url display_name icon slug'\n                    );\n                    return categories.toObject();\n                  } catch (err) {}\n                },\n                [],\n                []\n              );\n              return categories;\n            }),\n            priceRangeOptions: hook(() => {\n              const options = {\n                min: 100000,\n                max: 5000000,\n              };\n              options.step = (options.max - options.min) / 20;\n              options.defaultValue = [options.min + options.step, options.max - options.step];\n\n              return options;\n            }),\n\n            advisorSearchForm: hook((ctx) => {\n              const route = useRoute();\n              const form = useFormik({\n                initialValues: {\n                  category: '',\n                  service: '',\n                  priceRange: ctx.get('priceRangeOptions.defaultValue'),\n                },\n                onSubmit: async (values, actions) => {\n                  try {\n                    const { priceRange } = values;\n                    const [minPrice, maxPrice] = priceRange;\n                    route.navigate(\n                      route.to('/filter', {\n                        ..._.omit(values, ['priceRange']),\n                        min: minPrice,\n                        max: maxPrice,\n                      })\n                    );\n                  } catch (error) {\n                    actions.setStatus({\n                      error,\n                    });\n                  }\n                },\n                validationSchema: Yup.object().shape({}),\n              });\n              return form;\n            }),\n          },\n        },\n      ],\n    ],\n  },\n  isLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n  notLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => !ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n});\n\nexport default bindData;\n","import View from './View.js';\nimport Data from './Data.js';\n\nexport default Data(View);\n","import React from 'react';\n\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\n\nimport App from '@uz/unitz-app-web/UserApp';\nimport SEO from '@uz/unitz-layout-web/SEO';\n\nimport Layout from '@uz/unitz-layout-web/LayoutMain';\n\nimport SearchPage from '@uz/unitz-pages/SearchPage';\nimport PageData from '../data/PageDataQuery';\n\nconst SearchIndex = (props) => {\n  return (\n    <App>\n      <Layout location={props.location} PageData={PageData}>\n        <DIV>\n          <SEO pageData={ctx.apply('ctf.findPage', { name: 'Homepage' })} />\n          <Layout.POS name=\"app-header\">{ctx.apply('ctf.renderSection', { name: 'articleNavbarSection' })}</Layout.POS>\n          <Layout.POS name=\"app-body\">\n            <SearchPage />\n          </Layout.POS>\n          <Layout.POS name=\"app-footer\">{ctx.apply('ctf.renderSection', { name: 'articleFooterSection' })}</Layout.POS>\n        </DIV>\n      </Layout>\n    </App>\n  );\n};\n\nexport default SearchIndex;\n","/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that negates the result of the predicate `func`. The\n * `func` predicate is invoked with the `this` binding and arguments of the\n * created function.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Function\n * @param {Function} predicate The predicate to negate.\n * @returns {Function} Returns the new negated function.\n * @example\n *\n * function isEven(n) {\n *   return n % 2 == 0;\n * }\n *\n * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n * // => [1, 3, 5]\n */\nfunction negate(predicate) {\n  if (typeof predicate != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  return function() {\n    var args = arguments;\n    switch (args.length) {\n      case 0: return !predicate.call(this);\n      case 1: return !predicate.call(this, args[0]);\n      case 2: return !predicate.call(this, args[0], args[1]);\n      case 3: return !predicate.call(this, args[0], args[1], args[2]);\n    }\n    return !predicate.apply(this, args);\n  };\n}\n\nmodule.exports = negate;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray'),\n    negate = require('./negate');\n\n/**\n * The opposite of `_.filter`; this method returns the elements of `collection`\n * that `predicate` does **not** return truthy for.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.filter\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': false },\n *   { 'user': 'fred',   'age': 40, 'active': true }\n * ];\n *\n * _.reject(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.reject(users, { 'age': 40, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.reject(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.reject(users, 'active');\n * // => objects for ['barney']\n */\nfunction reject(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, negate(baseIteratee(predicate, 3)));\n}\n\nmodule.exports = reject;\n","import React from 'react';\nimport _ from 'lodash';\n\nclass Stream {\n  listeners = {};\n\n  emit(event, ...params) {\n    _.get(this.listeners, [event], []).map((listener) => listener.call(this, ...params));\n  }\n\n  on(event, listener) {\n    _.update(this.listeners, [event], (val) => (val ? val.concat(listener) : [listener]));\n    return () => {\n      _.update(this.listeners, [event], (val) => _.reject(val || [], listener));\n    };\n  }\n\n  proxy(stream, events) {\n    const dispoers = [].concat(events || _.keys(stream.listeners)).map((event) => {\n      return stream.on(event, (...params) => {\n        this.emit(event, ...params);\n      });\n    });\n    return () => dispoers.map((dis) => dis());\n  }\n}\n\nconst resolveFunc = (fn, ...args) => {\n  if (_.isFunction(fn)) {\n    return fn.call(fn, ...args);\n  }\n  return fn;\n};\n\nconst isObservable = (obj) => {\n  return !!obj && typeof obj.subscribe === 'function';\n};\n\nconst isPromise = (obj) => {\n  return !!obj && typeof obj.then === 'function';\n};\n\nconst isStream = (obj) => {\n  return !!obj && typeof obj.on === 'function' && typeof obj.emit === 'function';\n};\n\nconst isIterator = (obj) => {\n  return !!obj && typeof obj.next === 'function';\n};\n\nexport const RESABLE = ({ children, loading }) => {\n  const [v, $v] = React.useState(0);\n\n  const ref = React.useRef({\n    loading: false,\n\n    listPromise: {},\n\n    listStream: {},\n    listStreamSubscriber: {},\n\n    listObservable: {},\n    listSubscription: {},\n\n    listData: {},\n    listOpts: {},\n\n    stream: new Stream(),\n    disposers: []\n  });\n\n  _.assign(ref.current, { v, $v });\n\n  React.useMemo(() => {\n    ref.current.disposers\n      && ref.current.disposers.push(\n        ref.current.stream.on(\n          'resolve',\n          _.debounce(async () => {\n            ref.current.loading = true;\n\n            // for listPromise\n            if (ref.current.listPromise) {\n              for (const key of Object.keys(ref.current.listPromise)) {\n                if (!_.has(ref.current.listData, key)) {\n                  let item = ref.current.listPromise[key];\n                  item = await resolveFunc(item);\n                  _.set(ref.current.listData, key, item);\n                }\n              }\n            }\n\n            // for listObservable\n            if (ref.current.listObservable) {\n              for (const key of Object.keys(ref.current.listObservable)) {\n                if (!_.has(ref.current.listSubscription, key)) {\n                  const item = ref.current.listObservable[key];\n                  const sub = item.subscribe((val) => {\n                    _.set(ref.current.listData, key, val);\n                    ref.current.stream && ref.current.stream.emit('changed');\n                  });\n                  _.set(ref.current.listSubscription, key, sub);\n                }\n              }\n            }\n\n            // for listStream\n            if (ref.current.listStream) {\n              for (const key of Object.keys(ref.current.listStream)) {\n                if (!_.has(ref.current.listStreamSubscriber, key)) {\n                  const item = ref.current.listStream[key];\n                  const event = _.get(ref.current.listOpts, [key, 'event'], 'data');\n                  const sub = item.on(event, (val) => {\n                    _.set(ref.current.listData, key, val);\n                    ref.current.stream && ref.current.stream.emit('changed');\n                  });\n                  _.set(ref.current.listStreamSubscriber, key, sub);\n                }\n              }\n            }\n\n            ref.current.loading = false;\n            ref.current.stream && ref.current.stream.emit('changed');\n          })\n        )\n      );\n\n    ref.current.disposers\n      && ref.current.disposers.push(\n        ref.current.stream.on(\n          'changed',\n          _.debounce(async () => {\n            if (!_.isEqual(ref.current.prevData, ref.current.listData)) {\n              ref.current.prevData = _.cloneDeep(ref.current.listData);\n              ref.current.$v && ref.current.$v(ref.current.v + 1);\n            }\n          })\n        )\n      );\n  }, []);\n\n  React.useEffect(() => {\n    return () => {\n      ref.current.disposers && ref.current.disposers.forEach((dis) => dis());\n\n      // unsubscribe subscriptions\n      ref.current.listSubscription && _.map(ref.current.listSubscription, (sub) => sub && sub.unsubscribe);\n\n      // disposer stream listener\n      ref.current.listStreamSubscriber\n        && _.map(ref.current.listStreamSubscriber, (sub) => {\n          return sub && sub();\n        });\n\n      ref.current = {};\n    };\n  }, []);\n\n  const resolvePromiseGen = React.useCallback(() => {\n    let index = 0;\n    const getAutoKey = (prefix = 'auto') => {\n      index++;\n      return `${prefix}_${index}`;\n    };\n    const resolvePromise = (data, def, keyId, opts) => {\n      const key = keyId || getAutoKey('promise');\n      ref.current.listPromise && _.set(ref.current.listPromise, key, data);\n      ref.current.listOpts && _.set(ref.current.listOpts, key, opts);\n      ref.current.stream && ref.current.stream.emit('resolve', key);\n      return _.get(ref.current.listData, key, def);\n    };\n\n    const resolveObservable = (data, def, keyId, opts) => {\n      const key = keyId || getAutoKey('observable');\n      ref.current.listObservable && _.set(ref.current.listObservable, key, data);\n      ref.current.listOpts && _.set(ref.current.listOpts, key, opts);\n      ref.current.stream && ref.current.stream.emit('resolve', key);\n      return _.get(ref.current.listData, key, def);\n    };\n\n    const resolveStream = (data, def, keyId, opts) => {\n      const key = keyId || getAutoKey('stream');\n      ref.current.listStream && _.set(ref.current.listStream, key, data);\n      ref.current.listOpts && _.set(ref.current.listOpts, key, opts);\n      ref.current.stream && ref.current.stream.emit('resolve', key);\n      return _.get(ref.current.listData, key, def);\n    };\n\n    const resolver = (data, def, keyId, opts) => {\n      if (isPromise(data)) {\n        // console.log('resolving promise')\n        return resolvePromise(data, def, keyId, opts);\n      } if (isObservable(data)) {\n        // console.log('resolving observable', data);\n        return resolveObservable(data, def, keyId, opts);\n      } if (isStream(data)) {\n        // console.log('resolving stream', data);\n        return resolveStream(data, def, keyId, opts);\n      } if (isIterator(data)) {\n        // console.log('resolving iterator', data);\n        return def;\n      }\n      // console.log('not resolveable data')\n      return data;\n      // return def;\n    };\n\n    resolver.for = (keyId, opts) => (data, def) => resolver(data, def, keyId, opts);\n\n    return resolver;\n  }, []);\n\n  if (ref.current.loading) {\n    return resolveFunc(loading) || null;\n  }\n\n  return resolveFunc(children, resolvePromiseGen());\n};\n\nexport const resable = () => {};\n\nexport default RESABLE;\n","import React from 'react';\nimport _ from 'lodash';\n\nexport const usePromiseSource = (promise, def, deps) => {\n  const [val, $val] = React.useState(def);\n  const ref = React.useRef({});\n  _.assign(ref.current, { val, $val, promise });\n\n  const setVal = (newVal) => {\n    if (!_.isEqual(newVal, ref.current.val)) {\n      // update local val\n      if (ref.current.$val) {\n        ref.current.$val(newVal);\n      }\n    }\n  };\n  React.useEffect(() => {\n    (async () => {\n      let val = promise;\n      if (_.isFunction(val)) {\n        val = val();\n      }\n      val = await val;\n      setVal(val);\n    })();\n    return () => {\n      ref.current = {};\n    };\n    // eslint-disable-next-line\n  }, [ref, ..._.castArray(deps || [])]);\n\n  return ref.current.val;\n};\n\nexport default usePromiseSource;\n"],"sourceRoot":""}