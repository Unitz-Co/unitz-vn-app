{"version":3,"sources":["webpack:////Volumes/Data/working/Unitz/ws-app-web/node_modules/formik-antd/es/rate/index.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallFinish.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallMissed.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallRejected.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallEarlyEnd.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceCallCompleted/View.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceCallCompleted/Data.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceCallCompleted/index.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallConnecting.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallIniting.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallOnProgress.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/PublisherHandler.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/VoiceCallSession.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/components/SectionVoiceCallActions.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/View.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-models/VoiceCallWebModel/constants.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-models/VoiceCallWebModel/VoiceCallState.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-models/VoiceCallWebModel/index.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/index.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-components-web/VoiceCall/Data.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceCall/View.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-models/VoiceCallWebModel/formatter.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceCall/Data.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceCall/index.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceServiceSession/View.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceServiceSession/Data.js","webpack:////Volumes/Data/working/Unitz/ws-app-web/modules/unitz-pages/VoiceServiceSession/index.js","webpack:///./src/templates/voicecall/index.js"],"names":["_a","name","validate","fast","_onChange","onChange","restProps","_ref","value","field","_ref$form","form","setFieldValue","setFieldTouched","Object","assign","valueOf","FinishLayout","styled","div","gstyles","colors","sub","Triagle","attrs","props","halfSize","size","color","border","View8","DIV","className","FormProvider","ctx","get","Avatar","src","apply","count","TextArea","rows","placeholder","Button","onClick","disabled","loading","type","block","ghost","icons","fill","brandb500","icon","number","toString","e","Index","VoiceCallFinish","VoiceCallMissed","VoiceCallRejected","RatingFlatform","VoiceCallEarlyEnd","Data","bindings","pageContainer","rules","data","transaction","hook","session_id","useRoute","useObservableSource","TransactionModel","find","transactionData","transactions","useSubjectSource","statusLatest","TransactionFormatter","callPackageTimeMinute","AdvisorFormatter","callPackage","callPackageTime","callPackagePrice","callPackageTotal","purchaseData","purchase_id","usePromiseSource","a","PurchaseModel","purchase","toObject","advisorService","advisor","service","advisorProfile","reviewAggregate","bill","CFAdvisorProfileFormatter","amountPayment","displayName","AdvisorProfileFormatter","avatarUrl","rating","ratingText","reviewText","ratingScore","reviewScore","reviewCount","status","PurchaseFormatter","getStatus","totalAfter","formatVND","totalBefore","discount","advisor_id","user_id","useFormik","initialValues","note","onSubmit","values","AdvisorReviewModel","create","target_id","review_text","score","created_by","console","log","validationSchema","Yup","shape","required","canSubmit","page","React","useState","$rating","useEffect","handlers","ratingFinish","isLoading","display","notLoading","completedSuccess","completeStatus","completedMissed","completedRejected","completedEarlyEnd","completedRating","View","white500","RefreshInterval","interval","num","DraggableHandle","PublisherHandler","children","Responsive","sm","normal","top","right","width","height","collapse","md","lg","resProps","style","position","zIndex","bottom","axis","handle","defaultPosition","x","y","grid","scale","bounds","left","cx","OTSession","Loadable","OTPublisher","OTStreams","OTSubscriber","areEqual","prevProps","nextProps","layout","CallSession","memo","voiceCallModel","window","forceCtx","properties","cameraPosition","publishAudio","publishVideo","showControls","backgroundImageURI","eventHandlers","error","args","otrnError","advisorAvatarUrl","userAvatarUrl","ControlButton","text","horizontal","rest","main","background","VoiceCallSession","VoiceCallIniting","VoiceCallConnecting","VoiceCallOnProgress","INTERNET_STATES","connected","reconnecting","disconnect","VoiceCallState","_local","id","this","states","voiceCallConnecting","voiceCallReject","voiceCallComplete","isNoAnswer","startTime","endTime","heartbeat","sessionData","peerStates","micMute","videoMute","internetStatus","onConnect","state","once","connectFirestore","docId","collectionName","uid","oid","userId","advisorId","InstanceMap","items","add","instance","VoiceCallModel","callState","CALL_STATES","voiceCallIniting","msg","remoteState","localState","constructor","initState","stream","Stream","set","resolvers","user","on","notifTimer","setTimeout","emit","clearTimeout","hasCallState","voiceCallTaking","startCall","startTimer","getCallState","getState","voiceCallFinish","setState","moment","isMounted","stopNotifySession","voiceCallIncomming","opts","instances","fromMessage","service_id","connectStore","fromSession","createSession","fromCall","callData","err","enhance","getSectionId","getSectionToken","getSectionKey","params","fbFnsClient","getClient","post","notifySession","notifId","watchNotifTimeout","watcherKey","docRef","fibApp","firestore","collection","doc","disposers","push","onSnapshot","docData","map","dis","splice","length","switchCamera","cameraPositions","newPos","toggleMic","toggleVideo","toggleVideoSubscriber","collapseVideo","separateVideo","reConnecting","reConnected","disConnected","isConnected","isConnecting","isDisconnected","peerId","voiceCallOnProgress","takeCall","endCall","startIncomingCall","rejectCall","getCallDuration","now","duration","diff","durationFormatter","asMilliseconds","getCallDurationTotal","format","getCallMaxDuration","durationSecondsStr","onForegroundEvent","ev","detail","onBackgroundEvent","BaseModel","voiceComponent","voiceCallOnProgressOffCamera","voiceCallDisconnect","sessionReconnect","callSession","ref","VoiceCall","SectionVoiceCallActions","formatter","getTokboxConfig","videoCallModel","apiKey","sessionId","token","signal","to","sessionConnected","setInterval","sessionDisconnected","connectionId","sessionReconnected","sessionReconnecting","streamCreated","connectionCreated","connectionDestroyed","getTokboxSubscriberConfig","videoDisabled","videoEnabled","voicePage","route","routeParams","useMemo","hookState","tokbox","VoiceCallFormatter","tokboxSubscriber","AdvisorModel","profile","item","profileId","price","pricePerMinTxt","pricePerMin","pricePerMinTitle","isCalling","onCompleted","step","toUrl","redirectUrl","origin","navigate","relace","setRouteState","price_amount","discounts","sectionVoiceActions","Payment","PaymentConfirm","VoiceCallCompleted","STEP_LIST","STEP_LIST_BY_NAME","val","index","serviceSessionPage","stepModel","currentStep","$currentStep","setStep","newStep","hasNext","nextStep","prevStep","callAgain","undefined","callFinish","navigateExternal","paymentStep","confirmStep","serviceStep","completedStep","component","withPageContext","location","PageData","SEO","pageData","POS","VoiceServiceSession"],"mappings":"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","file":"component---src-templates-voicecall-index-js-4b8f280f922686916cfd.js","sourcesContent":["import { __rest } from \"tslib\";\nimport { Rate as $Rate } from 'antd';\nimport * as React from 'react';\nimport Field from '../field';\nexport var Rate = function Rate(_a) {\n  var name = _a.name,\n      validate = _a.validate,\n      fast = _a.fast,\n      _onChange = _a.onChange,\n      restProps = __rest(_a, [\"name\", \"validate\", \"fast\", \"onChange\"]);\n\n  return React.createElement(Field, {\n    name: name,\n    validate: validate,\n    fast: fast\n  }, function (_ref) {\n    var value = _ref.field.value,\n        _ref$form = _ref.form,\n        setFieldValue = _ref$form.setFieldValue,\n        setFieldTouched = _ref$form.setFieldTouched;\n    return React.createElement($Rate, Object.assign({\n      value: value,\n      onChange: function onChange(value) {\n        setFieldValue(name, value != null ? value.valueOf() : value);\n        setFieldTouched(name, true);\n        _onChange && _onChange(value);\n      }\n    }, restProps));\n  });\n};\nexport default Rate;","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport FormProvider from '@uz/unitz-components-web/FormProvider';\nimport { Input, Rate } from 'formik-antd';\nimport { Button } from '@uz/unitz-components-web/Button';\nimport { Avatar } from '@uz/unitz-components-web/Avatar';\n\nimport gstyles from '@vl/gstyles';\nimport styled from 'styled-components';\n\nconst FinishLayout = styled.div`\n  padding: 0 16px;\n  textarea.ant-input {\n    font-size: 16px;\n  }\n  textarea.ant-input::placeholder {\n    color: ${gstyles.colors.sub};\n    font-size: 16px;\n  }\n  .ant-input {\n    padding: 0.5rem 0.75rem;\n    border-radius: 0.5rem;\n    --tw-border-opacity: 1;\n    border-color: rgba(191, 205, 217, var(--tw-border-opacity));\n  }\n`;\nconst Triagle = styled.div.attrs((props) => ({\n  halfSize: props.size ? `${props.size / 2}px` : '5px',\n  size: props.size ? `${props.size}px` : '10px',\n  color: props.color ? props.color : gstyles.colors.border,\n}))`\n  position: relative;\n  overflow: hidden;\n  transform: translateY(50%) rotate(45deg) skewY(45deg) scaleX(0.5);\n  pointer-events: none;\n  & {\n    width: ${(props) => props.size};\n    height: ${(props) => props.size};\n  }\n\n  &::before,\n  &::after {\n    width: ${(props) => props.size};\n    height: ${(props) => props.size};\n  }\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background: ${(props) => props.color};\n    pointer-events: auto;\n  }\n  &::before {\n    transform: scaleX(1.155) skewY(-30deg) rotate(-30deg) translateY(-42.3%) skewX(30deg) scaleY(0.866) translateX(-24%);\n  }\n  &::after {\n    transform: scaleX(1.155) skewY(-30deg) rotate(-30deg) translateY(-42.3%) skewX(-30deg) scaleY(0.866) translateX(24%);\n  }\n\n  border-radius: 20%;\n  &::before {\n    border-radius: 20% 20% 20% 55%;\n  }\n\n  &::after {\n    border-radius: 20% 20% 55% 20%;\n  }\n  textarea::-webkit-resizer {\n    display: none;\n  }\n`;\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallFinish\">\n      {/* <Modal\n        className=\"pb-0 overflow-hidden rounded-xl\"\n        style={{ borderRadius: 12 }}\n        bodyStyle={{ padding: 0 }}\n        width={600}\n        footer={null}\n        visible={true}\n        closable={false}\n      > */}\n      <FinishLayout>\n        <FormProvider form={ctx.get('form')}>\n          <section className=\"py-0 bg-white min-lg:w-150 max-w-150 rounded-xl\">\n            <div className=\"flex flex-col items-center p-6\">\n              <div className=\"flex items-center\">\n                <Avatar src={ctx.get('purchaseData.advisorProfile.avatarUrl')} size={32} />\n                <h1 className=\"mb-0 ml-2 text-base text-main\">{ctx.get('purchaseData.advisorProfile.displayName')}</h1>\n              </div>\n              <p className=\"mt-4 mb-3 text-base font-normal\">{ctx.apply('i18n.t', 'AdvisorVideoCall.finishDesc')}</p>\n              <Rate count={5} name=\"rating\" />\n              <label className=\"mt-2 text-center text-main\">\n                {ctx.apply('i18n.t', `RatingSuggestion.label${ctx.get('form.values.rating')}`)}\n              </label>\n            </div>\n            <div className=\"border-b border-divider\"></div>\n            <div className=\"flex flex-col p-6 pb-0\">\n              <label className=\"mb-2 text-base\">{ctx.apply('i18n.t', 'AdvisorVideoCall.userReaction')}</label>\n              <div className=\"relative\">\n                <Input.TextArea\n                  name=\"note\"\n                  rows={3}\n                  placeholder={ctx.apply('i18n.t', 'AdvisorVideoCall.finishNote')}\n                  // onChange={(e) => ctx.apply('form.handleChange', 'note')(_.get(e, 'target.value', ''))}\n                ></Input.TextArea>\n                <div className=\"absolute p-1 rounded-lg pointer-events-none right-1px bottom-1px bg-white500\">\n                  <Triagle className=\"\" size={10} color={gstyles.colors.border} />\n                </div>\n              </div>\n            </div>\n            <div className=\"flex flex-col justify-between p-6 space-y-4\">\n              <Button\n                onClick={ctx.get('form.submitForm')}\n                size=\"large\"\n                disabled={!ctx.get('canSubmit')}\n                loading={ctx.get('form.isSubmitting')}\n                type=\"primary\"\n                block\n              >\n                {ctx.apply('i18n.t', 'AdvisorVoiceCall.finishReview')}\n              </Button>\n              <Button\n                onClick={ctx.get('stepModel.handlers.callFinish')}\n                size=\"large\"\n                type=\"text\"\n                name=\"ink\"\n                ghost\n                block\n              >\n                {ctx.apply('i18n.t', 'AdvisorVideoCall.exit')}\n              </Button>\n            </div>\n          </section>\n        </FormProvider>\n      </FinishLayout>\n      {/* </Modal> */}\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport { Rate } from 'antd';\nimport { Button } from '@uz/unitz-components-web/Button';\nimport { Avatar } from '@uz/unitz-components-web/Avatar';\n\nimport gstyles from '@vl/gstyles';\nimport styled from 'styled-components';\n\nconst FinishLayout = styled.div`\n  padding: 0 16px;\n  textarea.ant-input {\n    font-size: 16px;\n  }\n  textarea.ant-input::placeholder {\n    color: ${gstyles.colors.sub};\n    font-size: 16px;\n  }\n  .ant-input {\n    padding: 0.5rem 0.75rem;\n    border-radius: 0.5rem;\n    --tw-border-opacity: 1;\n    border-color: rgba(191, 205, 217, var(--tw-border-opacity));\n  }\n`;\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallMissed\">\n      {/* <Modal\n        className=\"pb-0 overflow-hidden rounded-xl\"\n        style={{ borderRadius: 12 }}\n        bodyStyle={{ padding: 0 }}\n        width={600}\n        footer={null}\n        visible={true}\n        closable={false}\n      > */}\n      <FinishLayout>\n        <section className=\"py-0 bg-white min-lg:w-150 max-w-150 rounded-xl\">\n          <div className=\"flex flex-col items-center min-lg:p-6 max-lg:py-6\">\n            <h2 className=\"mb-1 text-xl text-main\">{ctx.apply('i18n.t', 'AdvisorVoiceCall.callStatus.missedLabel')}</h2>\n            <div className=\"flex mt-1\">\n              {gstyles.icons({\n                name: 'voice-call',\n                fill: gstyles.colors.brandb500,\n                size: 24,\n                className: 'mr-2',\n              })}\n              <p className=\"mb-0 text-base font-normal text-main\">{ctx.get('purchaseData.bill.totalAfter')}</p>\n            </div>\n            <div className=\"flex items-center justify-between w-full px-4 mt-4 min-lg:py-2 max-lg:py-1 min-lg:rounded-xl bg-red-lightest\">\n              <span className=\"text-sub\">{ctx.apply('i18n.t', 'AdvisorVideoCall.missCallText')}</span>\n              <Button\n                onClick={ctx.get('stepModel.handlers.callAgain')}\n                icon={gstyles.icons({\n                  name: 'voice-call',\n                  size: 22,\n                  className: 'inline-block mr-2',\n                })}\n                type=\"link\"\n                name=\"red\"\n              >\n                {ctx.apply('i18n.t', 'AdvisorVideoCall.reCall')}\n              </Button>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex flex-col items-center p-6\">\n            <div className=\"flex items-center\">\n              <Avatar src={ctx.get('purchaseData.advisorProfile.avatarUrl')} size={80} />\n              <div className=\"flex flex-col ml-5\">\n                <h1 className=\"mb-1 text-xl font-medium\">{ctx.get('purchaseData.advisorProfile.displayName')}</h1>\n                <div className=\"flex items-center mb-1\">\n                  <div className=\"mr-2 -mb-1 text-base\">{ctx.get('purchaseData.advisorProfile.rating.ratingText')}</div>\n                  <Rate disabled count={5} value={ctx.get('purchaseData.advisorProfile.rating.ratingScore')} />\n                </div>\n                <div className=\"mb-2 uppercase text-sub text-xxs\">\n                  {ctx.get('purchaseData.advisorProfile.reviewCount')} {ctx.apply('i18n.t', 'Payment.Profile.reviews')}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex flex-row justify-between p-6 space-x-4\">\n            <Button onClick={ctx.get('stepModel.handlers.callFinish')} size=\"large\" type=\"primary\" block>\n              {ctx.apply('i18n.t', 'AdvisorVideoCall.finishSend')}\n            </Button>\n          </div>\n        </section>\n      </FinishLayout>\n      {/* </Modal> */}\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport { Rate } from 'antd';\nimport { Button } from '@uz/unitz-components-web/Button';\nimport { Avatar } from '@uz/unitz-components-web/Avatar';\n\nimport gstyles from '@vl/gstyles';\nimport styled from 'styled-components';\n\nconst FinishLayout = styled.div`\n  padding: 0 16px;\n  textarea.ant-input {\n    font-size: 16px;\n  }\n  textarea.ant-input::placeholder {\n    color: ${gstyles.colors.sub};\n    font-size: 16px;\n  }\n  .ant-input {\n    padding: 0.5rem 0.75rem;\n    border-radius: 0.5rem;\n    --tw-border-opacity: 1;\n    border-color: rgba(191, 205, 217, var(--tw-border-opacity));\n  }\n`;\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallRejected\">\n      {/* <Modal\n        className=\"pb-0 overflow-hidden rounded-xl\"\n        style={{ borderRadius: 12 }}\n        bodyStyle={{ padding: 0 }}\n        width={600}\n        footer={null}\n        visible={true}\n        closable={false}\n      > */}\n      <FinishLayout>\n        <section className=\"py-0 bg-white min-lg:w-150 max-w-150 rounded-xl\">\n          <div className=\"flex flex-col items-center min-lg:p-6 max-lg:py-6\">\n            <h2 className=\"mb-1 text-xl text-main\">\n              {ctx.apply('i18n.t', 'AdvisorVoiceCall.callStatus.declinedLabel')}\n            </h2>\n            <div className=\"flex mt-1\">\n              {gstyles.icons({\n                name: 'voice-call',\n                fill: gstyles.colors.brandb500,\n                size: 24,\n                className: 'mr-2',\n              })}\n              <p className=\"mb-0 text-base font-normal text-main\">{ctx.get('purchaseData.bill.totalAfter')}</p>\n            </div>\n            <p className=\"mt-2 mb-0 mr-2 text-4xl text-main\">{ctx.apply('videoCallModel.getCallDurationTotal', '')}</p>\n            <div className=\"flex items-center justify-between w-full px-4 py-2 mt-4 min-lg:rounded-xl bg-red-lightest\">\n              <span className=\"text-sub\">{ctx.apply('i18n.t', 'AdvisorVoiceCall.rejectCallText')}</span>\n              <Button\n                onClick={ctx.get('stepModel.handlers.callAgain')}\n                icon={gstyles.icons({\n                  name: 'voice-call',\n                  size: 22,\n                  className: 'inline-block mr-2',\n                })}\n                type=\"link\"\n                name=\"red\"\n              >\n                {ctx.apply('i18n.t', 'AdvisorVideoCall.reCall')}\n              </Button>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex flex-col items-center p-6\">\n            <div className=\"flex items-center\">\n              <Avatar src={ctx.get('purchaseData.advisorProfile.avatarUrl')} size={80} />\n              <div className=\"flex flex-col ml-5\">\n                <h1 className=\"mb-1 text-xl font-medium\">{ctx.get('purchaseData.advisorProfile.displayName')}</h1>\n                <div className=\"flex items-center mb-1\">\n                  <div className=\"mr-2 -mb-1 text-base\">{ctx.get('purchaseData.advisorProfile.rating.ratingText')}</div>\n                  <Rate disabled count={5} value={ctx.get('purchaseData.advisorProfile.rating.ratingScore')} />\n                </div>\n                <div className=\"mb-2 uppercase text-sub text-xxs\">\n                  {ctx.get('purchaseData.advisorProfile.reviewCount')} {ctx.apply('i18n.t', 'Payment.Profile.reviews')}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex flex-row justify-between p-6 space-x-4\">\n            <Button onClick={ctx.get('stepModel.handlers.callFinish')} size=\"large\" type=\"primary\" block>\n              {ctx.apply('i18n.t', 'AdvisorVideoCall.finishSend')}\n            </Button>\n          </div>\n        </section>\n      </FinishLayout>\n      {/* </Modal> */}\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport { Input, Rate } from 'antd';\nimport { Button } from '@uz/unitz-components-web/Button';\nimport { Avatar } from '@uz/unitz-components-web/Avatar';\nimport gstyles from '@vl/gstyles';\nimport styled from 'styled-components';\nimport _ from 'lodash';\n\nconst FinishLayout = styled.div`\n  padding: 0 16px;\n  textarea.ant-input {\n    font-size: 16px;\n  }\n  textarea.ant-input::placeholder {\n    color: ${gstyles.colors.sub};\n    font-size: 16px;\n  }\n  .ant-input {\n    padding: 0.5rem 0.75rem;\n    border-radius: 0.5rem;\n    --tw-border-opacity: 1;\n    border-color: rgba(191, 205, 217, var(--tw-border-opacity));\n  }\n`;\nconst Triagle = styled.div.attrs((props) => ({\n  halfSize: props.size ? `${props.size / 2}px` : '5px',\n  size: props.size ? `${props.size}px` : '10px',\n  color: props.color ? props.color : gstyles.colors.border,\n}))`\n  position: relative;\n  overflow: hidden;\n  transform: translateY(50%) rotate(45deg) skewY(45deg) scaleX(0.5);\n  pointer-events: none;\n  & {\n    width: ${(props) => props.size};\n    height: ${(props) => props.size};\n  }\n\n  &::before,\n  &::after {\n    width: ${(props) => props.size};\n    height: ${(props) => props.size};\n  }\n  &::before,\n  &::after {\n    content: '';\n    position: absolute;\n    background: ${(props) => props.color};\n    pointer-events: auto;\n  }\n  &::before {\n    transform: scaleX(1.155) skewY(-30deg) rotate(-30deg) translateY(-42.3%) skewX(30deg) scaleY(0.866) translateX(-24%);\n  }\n  &::after {\n    transform: scaleX(1.155) skewY(-30deg) rotate(-30deg) translateY(-42.3%) skewX(-30deg) scaleY(0.866) translateX(24%);\n  }\n\n  border-radius: 20%;\n  &::before {\n    border-radius: 20% 20% 20% 55%;\n  }\n\n  &::after {\n    border-radius: 20% 20% 55% 20%;\n  }\n  textarea::-webkit-resizer {\n    display: none;\n  }\n`;\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallRejected\">\n      {/* <Modal\n        className=\"pb-0 overflow-hidden rounded-xl\"\n        style={{ borderRadius: 12 }}\n        bodyStyle={{ padding: 0 }}\n        width={600}\n        footer={null}\n        visible={true}\n        closable={false}\n      > */}\n      <FinishLayout>\n        <section className=\"py-0 bg-white min-lg:w-150 max-w-150 rounded-xl\">\n          <div className=\"flex flex-col items-center min-lg:p-6 max-lg:py-6\">\n            <h2 className=\"mb-1 text-xl text-main\">\n              {ctx.apply('i18n.t', 'AdvisorVideoCall.callStatus.earlyEndLabel')}\n            </h2>\n            <div className=\"flex mt-1\">\n              {gstyles.icons({\n                name: 'voice-call',\n                fill: gstyles.colors.brandb500,\n                size: 24,\n                className: 'mr-2',\n              })}\n              <p className=\"mb-0 text-base font-normal text-main\">{ctx.get('purchaseData.bill.totalAfter')}</p>\n            </div>\n            <p className=\"mt-2 mb-0 mr-2 text-4xl text-main\">{ctx.get('transactionData.callPackageTime')}</p>\n            <div className=\"flex items-center justify-between w-full px-4 mt-4 min-lg:py-2 max-lg:py-1 min-lg:rounded-xl bg-red-lightest\">\n              <span className=\"text-sub\">{ctx.apply('i18n.t', 'AdvisorVideoCall.earlyEndCallText')}</span>\n              <Button\n                onClick={ctx.get('stepModel.handlers.callAgain')}\n                icon={gstyles.icons({\n                  name: 'voice-call',\n                  size: 22,\n                  className: 'inline-block mr-2',\n                })}\n                type=\"link\"\n                name=\"red\"\n              >\n                {ctx.apply('i18n.t', 'AdvisorVideoCall.reCall')}\n              </Button>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex flex-col items-center p-6\">\n            <div className=\"flex items-center\">\n              <Avatar src={ctx.get('purchaseData.advisorProfile.avatarUrl')} size={32} />\n              <h1 className=\"mb-0 ml-2 text-base text-main\">{ctx.get('purchaseData.advisorProfile.displayName')}</h1>\n            </div>\n            <p className=\"mt-4 mb-3 text-base font-normal text-center\">\n              {ctx.apply('i18n.t', 'AdvisorVideoCall.finishDesc')}\n            </p>\n            <Rate\n              count={5}\n              value={ctx.get('form.values.rating')}\n              onChange={(number) => {\n                ctx.apply('form.handleChange', 'rating')(number.toString());\n              }}\n            />\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex flex-col p-6 pb-0\">\n            <label className=\"mb-2 text-base\">{ctx.apply('i18n.t', 'AdvisorVideoCall.userReaction')}</label>\n            <div className=\"relative\">\n              <Input.TextArea\n                rows={3}\n                value={ctx.get('form.values.note')}\n                placeholder={ctx.apply('i18n.t', 'AdvisorVideoCall.finishNote')}\n                onChange={(e) => ctx.apply('form.handleChange', 'note')(_.get(e, 'target.value', ''))}\n              ></Input.TextArea>\n              <div className=\"absolute p-1 rounded-lg pointer-events-none right-1px bottom-1px bg-white500\">\n                <Triagle className=\"\" size={10} color={gstyles.colors.border} />\n              </div>\n            </div>\n          </div>\n          <div className=\"flex flex-row justify-between p-6 space-x-4\">\n            <Button\n              onClick={ctx.get('form.submitForm')}\n              size=\"large\"\n              disabled={!ctx.get('canSubmit')}\n              loading={ctx.get('form.isSubmitting')}\n              type=\"primary\"\n              block\n            >\n              {ctx.apply('i18n.t', 'AdvisorVoiceCall.finishReview')}\n            </Button>\n            <Button onClick={ctx.get('stepModel.handlers.callFinish')} size=\"large\" type=\"primary\" block>\n              {ctx.apply('i18n.t', 'AdvisorVideoCall.finishSend')}\n            </Button>\n          </div>\n        </section>\n      </FinishLayout>\n      {/* </Modal> */}\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport DIV from '@vl/redata/DIV.macro';\nimport VoiceCallFinish from '@uz/unitz-components-web/VoiceCall/components/VoiceCallFinish';\nimport VoiceCallMissed from '@uz/unitz-components-web/VoiceCall/components/VoiceCallMissed';\nimport VoiceCallRejected from '@uz/unitz-components-web/VoiceCall/components/VoiceCallRejected';\nimport VoiceCallEarlyEnd from '@uz/unitz-components-web/VoiceCall/components/VoiceCallEarlyEnd';\nimport RatingFlatform from '@uz/unitz-pages/RatingFlatform';\n\nconst Index = () => {\n  return (\n    <DIV className=\"pageContainer\">\n      <div className=\"fixed top-0 left-0 z-10 flex items-center justify-center w-screen h-screen bg-main\">\n        <DIV className=\"completedSuccess\">\n          <VoiceCallFinish />\n        </DIV>\n        <DIV className=\"completedMissed\">\n          <VoiceCallMissed />\n        </DIV>\n        <DIV className=\"completedRejected\">\n          <VoiceCallRejected />\n        </DIV>\n        <DIV className=\"completedRating\">\n          <RatingFlatform />\n        </DIV>\n        <DIV className=\"completedEarlyEnd\">\n          <VoiceCallEarlyEnd />\n        </DIV>\n      </div>\n      {/* <DIV>\n        <RESABLE>\n          {ctx.debug(() => {\n            const transaction = resable.for('transaction')(ctx.get('transaction'), []);\n            ctx.set('transaction', transaction);\n          })}\n          <CallCompleted />\n        </RESABLE>\n      </DIV> */}\n      {/* <div className=\"flex justify-center\">\n        <section className=\"py-0 w-150\">\n          <div className=\"flex flex-col items-center p-6\">\n            <h2 className=\"mb-1 text-xl text-main\">{ctx.apply('i18n.t', 'AdvisorVideoReceiver.callInfo')}</h2>\n            {_.get(\n              IconStatus,\n              ctx.get('purchaseData.status'),\n              IconStatus.unknown\n            )({ name: ctx.apply('i18n.t', `Transaction.Status.${ctx.get('purchaseData.status')}`) })}\n            <div className=\"flex mt-2\">\n              <p className=\"mb-0 mr-2 text-4xl text-main\">{ctx.get('purchaseData.bill.totalAfter')}</p>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex justify-center py-6\">\n            <Avatar size={80} src={ctx.get('purchaseData.advisorProfile.avatarUrl')} />\n            <div className=\"ml-4\">\n              <h1 className=\"mb-0 text-xl font-medium\">{ctx.get('purchaseData.advisorProfile.displayName')}</h1>\n              <div className=\"flex items-center mb-1\">\n                <div className=\"mr-2 text-base\">{ctx.get('purchaseData.advisorProfile.rating.ratingText')}</div>\n                <Rate disabled count={5} value={ctx.get('purchaseData.advisorProfile.rating.ratingScore')} />\n              </div>\n              <div className=\"uppercase text-sub text-xxs\">\n                {ctx.get('purchaseData.advisorProfile.reviewCount')} {ctx.apply('i18n.t', 'Payment.Profile.reviews')}\n              </div>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n          <div className=\"flex flex-col p-6 bg-white200\">\n            <h2 className=\"text-xl\">{ctx.apply('i18n.t', 'Transaction.Detail.paymentDetail')}</h2>\n            <div className=\"flex justify-between\">\n              <span className=\"text-base text-sub\">\n                {ctx.apply('i18n.t', 'UserPayment.serviceType', { kind: ctx.get('purchaseData.service.kind') })}\n              </span>\n              <span className=\"text-base text-main\">{ctx.get('purchaseData.service.name')}</span>\n            </div>\n            <div className=\"my-6 border-b border-divider\"></div>\n            <div className=\"flex justify-between mb-3\">\n              <span className=\"text-base text-sub\">{ctx.apply('i18n.t', 'Payment.Bill.tempCost')}</span>\n              <span className=\"text-base text-main\">{ctx.get('purchaseData.bill.totalBefore')}</span>\n            </div>\n            {ctx.get('purchaseData.bill.discount') && (\n              <div className=\"flex justify-between\">\n                <span className=\"text-base text-sub\">{ctx.apply('i18n.t', 'Payment.Bill.promotion')}</span>\n                <span className=\"text-base text-main\">-{ctx.get('purchaseData.bill.discount')}</span>\n              </div>\n            )}\n            <div className=\"my-6 border-b border-divider\"></div>\n            <div className=\"flex justify-between\">\n              <span className=\"text-base font-semibold text-main\">{ctx.apply('i18n.t', 'Payment.Bill.totalCost')}</span>\n              <span className=\"text-base text-branda\">{ctx.get('purchaseData.bill.totalAfter')}</span>\n            </div>\n          </div>\n          <div className=\"border-b border-divider\"></div>\n        </section>\n      </div> */}\n    </DIV>\n  );\n};\n\nexport default Index;\n","import React from 'react';\nimport { bindings, hook } from '@vl/redata';\nimport useRoute from '@vl/hooks/useGbRoute';\nimport _ from 'lodash';\nimport PurchaseModel from '@uz/unitz-models/PurchaseModel';\nimport TransactionModel from '@uz/unitz-models/TransactionModel';\nimport AdvisorProfileFormatter from '@uz/unitz-models/AdvisorProfileModel/formatter';\nimport useSubjectSource from '@vl/hooks/useSubjectSource';\n// import useSubjectState from '@vl/hooks/useSubjectState';\nimport AdvisorFormatter from '@uz/unitz-models/AdvisorModel/formatter';\nimport TransactionFormatter from '@uz/unitz-models/TransactionModel/formatter';\nimport CFAdvisorProfileFormatter from '@uz/unitz-models/CFAdvisorProfileModel/formatter';\nimport PurchaseFormatter from '@uz/unitz-models/PurchaseModel/formatter';\nimport usePromiseSource from '@vl/hooks/usePromiseSource';\nimport useObservableSource from '@vl/hooks/useObservableSource';\nimport { formatVND } from '@vl/mod-utils/currencyFormatter';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport AdvisorReviewModel from '@uz/unitz-models/AdvisorReviewModel';\n\nconst bindData = bindings({\n  pageContainer: {\n    rules: [\n      [\n        'data',\n        {\n          data: {\n            transaction: hook((ctx) => {\n              const session_id = _.get(useRoute(), 'params.session_id', '');\n              const items = useObservableSource(() => TransactionModel.find(\n                `where: {session_id: {_eq: \"${session_id}\"}}`,\n                `\n                    service_pricing {\n                      detail {\n                        per_amount\n                        per_unit\n                        price_amount\n                        price_currency\n                        duration_amount: per_amount\n                        duration_unit: per_unit\n                      }\n                    }\n                    session_detail {\n                      duration_unit\n                      duration_amount\n                    }\n                    status_latest {\n                      status\n                    }\n                  `\n              ));\n              return items;\n            }),\n            transactionData: hook((ctx) => {\n              const transactions = useSubjectSource(ctx.get('transaction'));\n              const transaction = _.get(transactions, '0');\n              const statusLatest = TransactionFormatter.statusLatest(ctx)(transaction);\n              const callPackageTimeMinute = AdvisorFormatter.callPackageTimeMinute(ctx)(transaction);\n              return {\n                callPackage: AdvisorFormatter.callPackage(ctx)(transaction),\n                callPackageTime: AdvisorFormatter.callPackageTime(ctx)(transaction),\n                callPackagePrice: AdvisorFormatter.callPackagePrice(ctx)(transaction),\n                callPackageTotal: AdvisorFormatter.callPackageTotal(ctx)(transaction),\n                callPackageTimeMinute,\n                statusLatest,\n              };\n            }),\n            purchaseData: hook((ctx) => {\n              const purchase_id = _.get(useRoute(), 'params.purchase_id', '');\n              const purchaseData = usePromiseSource(\n                async () => {\n                  if (!purchase_id) return null;\n                  try {\n                    const purchase = await PurchaseModel.find(\n                      `where: {id: {_eq: \"${purchase_id}\"}}`,\n                      `\n                        id\n                        payments {\n                          amount\n                          type\n                        }\n                        services {\n                          id\n                          price_amount\n                          advisor_service {\n                            id\n                            service_id\n                            advisor {\n                              id\n                              profile {\n                                display_name\n                                avatar_url\n                              }\n                              review_agg {\n                                avg_score\n                              }\n                              reviews_aggregate {\n                                aggregate { count }\n                              }\n                            }\n                            service {\n                              name\n                              kind\n                              id\n                            }\n                            price {\n                              price_amount\n                              price_currency\n                              per_unit\n                              per_amount\n                            }\n                            discounts {\n                              percentage\n                              currency\n                              id\n                              amount\n                              type\n                            }  \n                          }\n                          \n                        }\n                        status {\n                          status\n                        }\n                        status_latest {\n                          status\n                        }\n                      `\n                    );\n                    return _.first(purchase.toObject());\n                  } catch (err) {}\n                },\n                null,\n                [purchase_id]\n              );\n\n              const advisorService = _.get(purchaseData, 'services.0.advisor_service');\n              const advisor = _.get(advisorService, 'advisor');\n              const service = _.get(advisorService, 'service');\n              const advisorProfile = _.get(advisor, 'profile');\n              const reviewAggregate = _.get(advisor, 'reviews_aggregate.aggregate');\n              const bill = CFAdvisorProfileFormatter.amountPayment(ctx)(advisorService);\n\n              const rtn = {\n                advisorProfile: {\n                  displayName: AdvisorProfileFormatter.displayName(ctx)(advisorProfile),\n                  avatarUrl: AdvisorProfileFormatter.avatarUrl(ctx)(advisorProfile),\n                  rating: {\n                    ratingText: AdvisorProfileFormatter.reviewText(ctx)(advisor),\n                    ratingScore: AdvisorProfileFormatter.reviewScore(ctx)(advisor),\n                  },\n                  reviewCount: AdvisorProfileFormatter.reviewCount(ctx)(reviewAggregate),\n                },\n                status: PurchaseFormatter.getStatus(ctx)(purchaseData),\n                bill: {\n                  totalAfter: _.get(bill, 'totalAfter') ? formatVND(_.get(bill, 'totalAfter')) : 0,\n                  totalBefore: _.get(bill, 'totalBefore') ? formatVND(_.get(bill, 'totalBefore')) : 0,\n                  discount: _.get(bill, 'discount') ? formatVND(_.get(bill, 'discount')) : 0,\n                },\n                service,\n              };\n              return rtn;\n            }),\n            form: hook((ctx) => {\n              const advisor_id = _.get(useRoute(), 'params.id', '');\n              const user_id = ctx.apply('authModel.getUserId');\n              // const userId = ctx.apply('authModel.getUserId');\n              const form = useFormik({\n                initialValues: {\n                  rating: 5,\n                  note: '',\n                },\n                onSubmit: async (values) => {\n                  try {\n                    await AdvisorReviewModel.create({\n                      target_id: advisor_id,\n                      review_text: _.get(values, 'note', ''),\n                      score: _.get(values, 'rating', 0) * 2,\n                      created_by: user_id,\n                    });\n                    await ctx.apply('stepModel.handlers.callFinish');\n                  } catch (error) {\n                    console.log(error);\n                  }\n                },\n                validationSchema: Yup.object().shape({\n                  rating: Yup.number().required(ctx.apply('i18n.t', 'Form.required')),\n                }),\n              });\n              return form;\n            }),\n            canSubmit: hook((ctx) => {\n              return ctx.get('form.isValid') && !ctx.get('form.isSubmitting') && ctx.get('form.dirty');\n            }),\n            page: hook((ctx) => {\n              const [rating, $rating] = React.useState(false);\n              React.useEffect(() => {\n                if (ctx.get('transactionData.callPackageTimeMinute') >= 3 && !rating) {\n                  $rating(true);\n                }\n              }, [ctx.get('transactionData.callPackageTimeMinute')]);\n              return {\n                rating,\n                $rating,\n                handlers: {\n                  ratingFinish: () => {\n                    $rating(false);\n                  },\n                },\n              };\n            }),\n          },\n        },\n      ],\n    ],\n  },\n  isLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n  notLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => !ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n  completedSuccess: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => {\n            const completeStatus = _.get(useRoute(), 'params.status');\n            return (\n              ctx.get('transactionData.statusLatest') !== 'incomplete'\n              && (!completeStatus || completeStatus === 'completed')\n              && !ctx.get('page.rating')\n            );\n          }),\n        },\n      ],\n    ],\n  },\n  completedMissed: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => _.get(useRoute(), 'params.status') === 'missed'),\n        },\n      ],\n    ],\n  },\n  completedRejected: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => _.get(useRoute(), 'params.status') === 'rejected'),\n        },\n      ],\n    ],\n  },\n  completedEarlyEnd: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook(\n            (ctx) => _.get(useRoute(), 'params.status') === 'completed'\n              && ctx.get('transactionData.statusLatest') === 'incomplete'\n          ),\n        },\n      ],\n    ],\n  },\n  completedRating: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.get('page.rating')),\n        },\n      ],\n    ],\n  },\n});\n\nexport default bindData;\n","import View from './View.js';\nimport Data from './Data.js';\n\nexport default Data(View);\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport { Avatar } from '@uz/unitz-components-web/Avatar';\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallConnecting\">\n      <section className=\"fixed absolute top-0 left-0 flex items-center justify-center w-full min-h-full py-0 bg-main\">\n        <article className=\"absolute top-6 left-6 max-sm:hidden\">\n          <h1 className=\"mb-1 text-xl font-medium text-white\">{ctx.get('@items.advisorProfile.displayName')}</h1>\n          <span className=\"text-base text-white animate-pulse\">\n            {ctx.apply('i18n.t', 'AdvisorVideoCall.ringingStatusTxt')}\n          </span>\n        </article>\n        <div className=\"flex flex-col items-center\">\n          <div className=\"absolute flex items-center justify-center rounded-full w-44 h-44 bg-white200 bg-opacity-40 animate-ping\">\n            <div className=\"flex items-center justify-center bg-opacity-50 rounded-full w-36 h-36 bg-white300\">\n              <div className=\"flex items-center justify-center rounded-full bg-opacity-70 w-28 h-28 bg-white400\"></div>\n            </div>\n          </div>\n          <Avatar className=\"opacity-100\" src={ctx.get('@items.advisorProfile.avatarUrl')} size={168} />\n          <article className=\"flex flex-col items-center mt-10 max-w-xxs min-sm:hidden\">\n            <h1 className=\"mb-1 text-xl font-medium text-white\">{ctx.get('@items.advisorProfile.displayName')}</h1>\n            <span className=\"text-base text-center text-white animate-pulse\">\n              {ctx.apply('i18n.t', 'AdvisorVideoCall.ringingStatusTxt')}\n            </span>\n          </article>\n        </div>\n      </section>\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport { Avatar } from '@uz/unitz-components-web/Avatar';\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallIniting\">\n      <section className=\"fixed absolute top-0 left-0 flex items-center justify-center w-full min-h-full py-0 bg-main\">\n        <article className=\"absolute top-6 left-6 max-sm:hidden\">\n          <h1 className=\"mb-1 text-xl font-medium text-white\">{ctx.get('@items.advisorProfile.displayName')}</h1>\n          <span className=\"text-base text-white animate-pulse\">\n            {ctx.apply('i18n.t', 'AdvisorVoiceCall.initingStatusTxt')}\n          </span>\n        </article>\n        <div className=\"flex flex-col items-center\">\n          <div className=\"absolute flex items-center justify-center rounded-full w-44 h-44 bg-white200 bg-opacity-40 animate-ping\">\n            <div className=\"flex items-center justify-center bg-opacity-50 rounded-full w-36 h-36 bg-white300\">\n              <div className=\"flex items-center justify-center rounded-full bg-opacity-70 w-28 h-28 bg-white400\"></div>\n            </div>\n          </div>\n          <Avatar className=\"opacity-100\" src={ctx.get('@items.advisorProfile.avatarUrl')} size={168} />\n          <article className=\"flex flex-col items-center mt-10 min-sm:hidden\">\n            <h1 className=\"mb-1 text-xl font-medium text-white\">{ctx.get('@items.advisorProfile.displayName')}</h1>\n            <span className=\"text-base text-center text-white animate-pulse\">\n              {ctx.apply('i18n.t', 'AdvisorVoiceCall.initingStatusTxt')}\n            </span>\n          </article>\n        </div>\n      </section>\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport gstyles from '@vl/gstyles';\nimport RefreshInterval from '@uz/unitz-components-web/RefreshInterval';\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallOnProgress\">\n      <section className=\"fixed z-10 py-0 bg-transparent top-6 left-6\">\n        <article>\n          <h1 className=\"flex flex-row mb-1 text-xl font-medium text-white\">\n            {ctx.get('@items.advisorProfile.displayName')}{' '}\n            {gstyles.icons({\n              name: ctx.apply('voiceCallModel.useState', 'otherState.micMute') ? 'micro-off' : 'micro',\n              fill: gstyles.colors.white500,\n              size: 12,\n            })}\n          </h1>\n\n          <RefreshInterval interval={1000}>\n            {() => (\n              <span className=\"text-base text-white animate-pulse\">\n                {ctx.apply('i18n.t', 'AdvisorInCome.inComeTextPackage', {\n                  num: ctx.apply('voiceCallModel.getCallMaxDuration'),\n                })}{' '}\n                / {ctx.apply('voiceCallModel.getCallDuration')}\n              </span>\n            )}\n          </RefreshInterval>\n        </article>\n      </section>\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport Draggable from 'react-draggable'; // Both at the same time\nimport cx from 'classnames';\nimport styled from 'styled-components';\nimport _ from 'lodash';\nimport { ResponsiveProps } from '@uz/unitz-components-web/Responsive';\n\nconst DraggableHandle = styled.div`\n  &.fixed-position {\n    transform: none !important;\n    cursor: default !important;\n  }\n`;\n\nconst PublisherHandler = ({ children, className, ...props }) => {\n  return (\n    <DIV>\n      <ResponsiveProps\n        sm={{\n          normal: {\n            top: 12,\n            right: 12,\n            width: 120,\n            height: 150,\n          },\n          collapse: {\n            top: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVideoCallStatus'), 'height', 0) / 2,\n            right: 0,\n            width: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVideoCallStatus'), 'width', 0),\n            height: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVideoCallStatus'), 'height', 0) / 2,\n          },\n        }}\n        md={{\n          normal: {\n            top: 46,\n            right: 46,\n            width: 190,\n            height: 106,\n          },\n          collapse: {\n            top: 0,\n            right: 0,\n            width: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVideoCallStatus'), 'width', 0) / 2,\n            height: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVideoCallStatus'), 'height', 0),\n          },\n        }}\n        lg={{\n          normal: {\n            top: 46,\n            right: 46,\n            width: 190,\n            height: 106,\n          },\n          collapse: {\n            top: 0,\n            right: 0,\n            width: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVideoCallStatus'), 'width', 0) / 2,\n            height: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVideoCallStatus'), 'height', 0),\n          },\n        }}\n      >\n        {(resProps) => {\n          const width = _.get(resProps, 'width', 190);\n          const height = _.get(resProps, 'height', 106);\n          const top = _.get(resProps, 'top', 46);\n          const right = _.get(resProps, 'right', 46);\n          return (\n            <div\n              style={{\n                position: 'absolute',\n                top,\n                right,\n                zIndex: 5,\n                width,\n                height,\n                ..._.get(resProps, 'normal', {}),\n                ...(ctx.apply('voiceCallModel.useState', 'myState.videoMute')\n                  ? {\n                    height: 0,\n                  }\n                  : {}),\n                ...(!ctx.apply('voiceCallModel.useState', 'myState.collapse')\n                  ? {\n                    top: 0,\n                    right: 0,\n                    bottom: 0,\n                    width: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVoiceCallStatus'), 'width', 0) / 2,\n                    height: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVoiceCallStatus'), 'height', 0),\n                    ..._.get(resProps, 'collapse', {}),\n                  }\n                  : {}),\n              }}\n            >\n              <Draggable\n                axis=\"both\"\n                handle=\".drag-handle\"\n                defaultPosition={{ x: 0, y: 0 }}\n                position={null}\n                grid={[8, 8]}\n                scale={1}\n                bounds={{\n                  top: -top,\n                  right,\n                  bottom: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVoiceCallStatus'), 'height', 0) - top - height,\n                  left:\n                    0 - (_.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVoiceCallStatus'), 'width', 0) - right - width),\n                }}\n                // onStop={(...args) => {\n                //   // store prefer screen postion to local storage and use it for default load\n                //   console.log('args', args);\n                // }}\n                disabled={!ctx.apply('voiceCallModel.useState', 'myState.collapse')}\n              >\n                <DraggableHandle\n                  className={cx(className, 'w-full h-full drag-handle bg-transparent', {\n                    'cursor-move': ctx.apply('voiceCallModel.useState', 'myState.collapse'),\n                    'fixed-position': !ctx.apply('voiceCallModel.useState', 'myState.collapse'),\n                  })}\n                  {...props}\n                >\n                  {children}\n                </DraggableHandle>\n              </Draggable>\n            </div>\n          );\n        }}\n      </ResponsiveProps>\n    </DIV>\n  );\n};\n\nexport default PublisherHandler;\n","import React from 'react';\nimport _ from 'lodash';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport Loadable from '@loadable/component';\n\nimport PublisherHandler from './PublisherHandler';\n\nconst OTSession = Loadable(() => import('./OpenTok/OTSession'));\nconst OTPublisher = Loadable(() => import('./OpenTok/OTPublisher'));\nconst OTStreams = Loadable(() => import('./OpenTok/OTStreams'));\nconst OTSubscriber = Loadable(() => import('./OpenTok/OTSubscriber'));\n\nfunction areEqual(prevProps, nextProps) {\n  return _.isEqual(prevProps.layout, nextProps.layout);\n}\n\nconst CallSession = React.memo(({ voiceCallModel, layout }) => {\n  const isSSR = typeof window === 'undefined';\n  if (isSSR) return null;\n  return (\n    <DIV forceCtx>\n      <OTSession {...ctx.get('tokbox')}>\n        <PublisherHandler>\n          <OTPublisher\n            className=\"w-full h-full bg-transparent\"\n            properties={{\n              cameraPosition: voiceCallModel.useState('cameraPosition'),\n              publishAudio: !voiceCallModel.useState('myState.micMute'),\n              publishVideo: false,\n              width: '100%',\n              height: '100%',\n              showControls: false,\n              style: {\n                backgroundImageURI: ctx.get('@items.userProfile.avatarUrl'),\n              },\n            }}\n            eventHandlers={{\n              error: (...args) => {\n                console.log('error', args);\n              },\n              otrnError: (...args) => {\n                console.log('otrnError', args);\n              },\n            }}\n          ></OTPublisher>\n        </PublisherHandler>\n        <div\n          style={{\n            ..._.pick(layout, ['width', 'height']),\n          }}\n        >\n          <OTStreams>\n            <div\n              className=\"absolute bg-transparent\"\n              style={{\n                ..._.pick(layout, ['width', 'height']),\n                ...(!ctx.apply('voiceCallModel.useState', 'myState.collapse')\n                  ? {\n                    left: 0,\n                    top: 0,\n                    width: layout.width / 2,\n                    height: layout.height,\n                  }\n                  : {}),\n              }}\n            >\n              <OTSubscriber\n                className=\"w-full h-full bg-transparent\"\n                {...ctx.get('tokboxSubscriber')}\n                properties={{\n                  showControls: false,\n                  height: '100%',\n                  width: '100%',\n                  style: {\n                    backgroundImageURI: ctx.get('@items.advisorProfile.avatarUrl'),\n                  },\n                }}\n              />\n            </div>\n          </OTStreams>\n        </div>\n      </OTSession>\n    </DIV>\n  );\n}, areEqual);\n\nconst View8 = () => {\n  return (\n    <DIV className=\"callSession\">\n      {ctx.apply('LAYOUT.useLayout', { layout: 'AdvisorVoiceCallStatus' }, ({ layout }) => {\n        if (!layout) return null;\n        if (!ctx.get('tokbox.sessionId')) return null;\n        const voiceCallModel = ctx.get('voiceCallModel');\n        return (\n          <CallSession\n            voiceCallModel={voiceCallModel}\n            layout={layout}\n            advisorAvatarUrl={ctx.get('@items.advisorProfile.avatarUrl')}\n            userAvatarUrl={ctx.get('@items.userProfile.avatarUrl')}\n          />\n        );\n      })}\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\nimport gstyles from '@vl/gstyles';\nimport cx from 'classnames';\n\n// import { Dropdown } from 'antd';\n\n// const MenuSetting = ({ data }) => {\n//   return (\n//     <div className=\"flex flex-col w-48 py-2 rounded-lg mb-20px bg-white500\">\n//       {data &&\n//         data.map(({ icon = '', name = '', ...rest }, index) => (\n//           // eslint-disable-next-line\n//           <div key={`${index}`} className=\"flex px-3 py-2 cursor-pointer\" {...rest}>\n//             {icon}\n//             <span className=\"text-main\">{name}</span>\n//           </div>\n//         ))}\n//     </div>\n//   );\n// };\n\nconst ControlButton = ({\n  className, icon, text, horizontal, ...rest\n}) => {\n  return (\n    <div\n      {...rest}\n      className={`flex items-center justify-center cursor-pointer text-white500 ${\n        horizontal ? 'flex-row' : 'flex-col'\n      } ${className}`}\n    >\n      {icon}\n      {!!text && <div className=\"mb-0 font-light text-normal\">{text}</div>}\n    </div>\n  );\n};\n\nconst View8 = () => {\n  return (\n    <DIV className=\"voiceCallConnecting\">\n      <section\n        className={cx(\n          'absolute bottom-0 z-10 flex justify-between w-full min-lg:px-6 max-lg:px-4 py-4 transition-transform duration-100 ease-in-out transform max-lg:flex-col bg-black400 bg-opacity-70'\n        )}\n      >\n        <div className=\"relative flex justify-between max-lg:hidden w-36\"></div>\n        <div className=\"flex justify-between p-0 min-lg:w-52 max-lg:w-full\">\n          <div className=\"flex flex-col items-center flex-1\">\n            <ControlButton\n              className={cx(\n                'w-12 h-12 rounded-full',\n                { 'bg-white500': ctx.apply('voiceCallModel.useState', 'myState.micMute') },\n                { 'bg-white200 bg-opacity-30': !ctx.apply('voiceCallModel.useState', 'myState.micMute') }\n              )}\n              onClick={() => {\n                ctx.apply('voiceCallModel.toggleMic');\n              }}\n              icon={gstyles.icons({\n                name: ctx.apply('voiceCallModel.useState', 'myState.micMute') ? 'micro-off' : 'micro',\n                fill: ctx.apply('voiceCallModel.useState', 'myState.micMute')\n                  ? gstyles.colors.main\n                  : gstyles.colors.white500,\n                size: 24,\n              })}\n            />\n\n            <span className=\"mt-2 text-white min-lg:hidden\">\n              {ctx.apply(\n                'i18n.t',\n                `AdvisorVideoReceiver.${\n                  !ctx.apply('voiceCallModel.useState', 'myState.micMute') ? 'microOff' : 'microOn'\n                }`\n              )}\n            </span>\n          </div>\n          <div className=\"flex flex-col items-center flex-1\">\n            <ControlButton\n              onClick={() => {\n                ctx.apply('voiceCallModel.endCall');\n              }}\n              className=\"w-12 h-12 rounded-full bg-red \"\n              icon={gstyles.icons({ name: 'call-end', fill: gstyles.colors.white500, size: 24 })}\n            />\n            <span className=\"mt-2 text-white min-lg:hidden\">{ctx.apply('i18n.t', 'AdvisorVideoReceiver.endCall')}</span>\n          </div>\n        </div>\n        <div className=\"flex justify-between w-36 max-lg:hidden\">\n          {/* <ControlButton\n            icon={gstyles.icons({\n              name: 'add-note',\n              fill: gstyles.colors.white500,\n              size: 24,\n              className: 'mb-2',\n            })}\n            text={ctx.apply('i18n.t', 'VideoCallPage.SectionAction.note')}\n          />\n          <ControlButton\n            icon={gstyles.icons({\n              name: 'heart',\n              fill: gstyles.colors.white500,\n              size: 24,\n              className: 'mb-2',\n            })}\n            text={ctx.apply('i18n.t', 'VideoCallPage.SectionAction.like')}\n          /> */}\n        </div>\n      </section>\n    </DIV>\n  );\n};\n\nexport default View8;\n","import React from 'react';\nimport DIV from '@vl/redata/DIV.macro';\nimport _ from 'lodash';\nimport { ctx } from '@vl/redata';\nimport {\n  VoiceCallConnecting, VoiceCallIniting, VoiceCallOnProgress, VoiceCallSession\n} from './components';\n\nconst Index = () => {\n  return (\n    <DIV className=\"voiceComponent\">\n      <div\n        className=\"drag-bounds\"\n        style={{\n          position: 'fixed',\n          zIndex: -100,\n          top: 0,\n          left: 0,\n          width: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVoiceCallStatus'), 'width', 0),\n          height: _.get(ctx.apply('LAYOUT.getLayout', 'AdvisorVoiceCallStatus'), 'height', 0),\n          background: 'transparent',\n        }}\n      />\n      <VoiceCallSession />\n      <VoiceCallIniting />\n      <VoiceCallConnecting />\n      <VoiceCallOnProgress />\n    </DIV>\n  );\n};\n\nexport default Index;\n","export const INTERNET_STATES = {\n  connected: 'connected',\n  reconnecting: 'reconnecting',\n  disconnect: 'disconnect'\n};\n","import connectFirestore from '@vl/mod-utils/connectFirestore';\nimport { INTERNET_STATES } from './constants';\n\nclass VoiceCallState {\n  // syncable state here\n\n  // local state here\n  _local = {\n    ctx: null\n  };\n\n  constructor(data, ctx) {\n    const {\n      id, user_id, advisor_id, ...rest\n    } = data;\n    // init state\n    Object.assign(this, {\n      states: {\n        voiceCallConnecting: false,\n        voiceCallReject: false,\n        voiceCallComplete: false,\n        isNoAnswer: false,\n        startTime: 0,\n        endTime: 0,\n        heartbeat: 0\n      },\n      sessionData: {},\n      user_id,\n      advisor_id,\n      session_id: id,\n      peerStates: {\n        [user_id]: {\n          micMute: false,\n          videoMute: false,\n          cameraPosition: '',\n          collapse: true,\n          internetStatus: INTERNET_STATES.connected,\n          startTime: 0,\n          endTime: 0,\n          heartbeat: 0\n        },\n        [advisor_id]: {\n          micMute: false,\n          videoMute: false,\n          cameraPosition: '',\n          collapse: true,\n          internetStatus: INTERNET_STATES.connected,\n          startTime: 0,\n          endTime: 0,\n          heartbeat: 0\n        }\n      },\n      ...rest\n    });\n\n    this._local.ctx = ctx;\n  }\n\n  get myState() {\n    return this.peerStates[this.uid];\n  }\n\n  get otherState() {\n    return this.peerStates[this.oid];\n  }\n\n  get peerState() {\n    return this.peerStates[this.uid];\n  }\n\n  get uid() {\n    const uid = this._local.ctx.apply('authModel.getUserId');\n    return uid;\n  }\n\n  get oid() {\n    const userId = this.user_id;\n    const advisorId = this.advisor_id;\n    const { uid } = this;\n    return uid === userId ? advisorId : userId;\n  }\n\n  onConnect(state) {\n    // connect to sync with firestore data;\n    state.once(\n      'onDestroy',\n      connectFirestore(this._local.ctx, this)(state, {\n        docId: this.session_id,\n        collectionName: 'voicecalls'\n      })\n    );\n  }\n}\n\nexport default VoiceCallState;\n","import _ from 'lodash';\n\nimport fbFnsClient from '@vl/mod-clients/fibGatsbyFns';\nimport fibApp from '@vl/mod-clients/fibGatsby';\n\nimport { BaseModel } from '@uz/unitz-models/BaseModel';\n\nimport Stream from '@vl/mod-utils/Stream';\nimport moment from 'moment';\nimport { durationFormatter } from '@vl/mod-utils/currencyFormatter';\n\nimport VoiceCallState from './VoiceCallState';\nimport { INTERNET_STATES } from './constants';\n\nconst NOTIF_INTERVAL = 2000;\n// const channelId = 'unitz-notifee-video-channel-2';\n// const soundFile = 'ringing';\n// const vibrationPattern = [300, 500];\n\nconst ACTIONS = {\n  TAKE: 'ACCEPT',\n  REJECT: 'DECLINE',\n};\n\nconst ACTION_HANDLERS = {\n  TAKE: null,\n  REJECT: null,\n};\n\nclass InstanceMap {\n  items = {};\n\n  add(instance) {\n    const id = instance.get('id');\n    if (!id) return null;\n    this.items[id] = instance;\n  }\n\n  get(id) {\n    return this.items[id];\n  }\n}\n\n// export class VoiceCallModel extends BaseModel {\nexport class VoiceCallModel extends BaseModel {\n  static instances = new InstanceMap();\n\n  static CALL_STATES = {\n    voiceCallConnecting: 'voiceCallConnecting',\n    voiceCallOnProgress: 'voiceCallOnProgress',\n    voiceCallIncomming: 'voiceCallIncomming',\n    voiceCallFinish: 'voiceCallFinish',\n    voiceCallIniting: 'voiceCallIniting',\n    voiceCallTaking: 'voiceCallTaking',\n    voiceCallReject: 'voiceCallReject',\n  };\n\n  static INTERNET_STATES = {\n    ...INTERNET_STATES,\n  };\n\n  state = {\n    callState: VoiceCallModel.CALL_STATES.voiceCallIniting,\n    videoMute: false,\n    cameraPosition: 'front',\n    startTime: null,\n    msg: '',\n    remoteState: {\n      videoMute: false,\n    },\n    localState: {\n      videoMute: false,\n    },\n  };\n\n  constructor(...args) {\n    super(...args);\n    this.constructor.initState(this);\n\n    const stream = new Stream();\n\n    this.set({\n      stream,\n      resolvers: {\n        user: async () => {\n          const user_id = this.get('user_id');\n          console.log('user_id', user_id);\n          // const user = await UserModel.fromId({ id: user_id });\n          // return user;\n          return { id: user_id };\n        },\n        advisor: async () => {\n          const advisor_id = this.get('advisor_id');\n          console.log('advisor_id', advisor_id);\n          // const instance = await AdvisorModel.fromId({ id: advisor_id });\n          // return instance;\n          return { id: advisor_id };\n        },\n      },\n    });\n\n    // configure stream reducer\n    stream.on('notify', async (msg) => {\n      // reschedule notify stream\n      const notifTimer = setTimeout(() => {\n        stream.emit('notify', msg);\n      }, NOTIF_INTERVAL);\n      this.set({ notifTimer });\n    });\n\n    stream.on('stopNotify', async () => {\n      // remove timer\n      const notifTimer = this.get('notifTimer');\n      if (notifTimer) {\n        clearTimeout(notifTimer);\n        this.set({ notifTimer: null });\n      }\n      // await notifee.cancelNotification(notifId);\n    });\n    // effect to start call\n    this.useEffect(\n      () => {\n        if (this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallTaking)) {\n          this.startCall();\n          this.startTimer();\n        }\n      },\n      () => [this.getCallState()]\n    );\n    this.useEffect(\n      () => {\n        if (this.getState('states.startTime') && this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallConnecting)) {\n          this.startCall();\n          this.startTimer();\n        }\n      },\n      () => [this.getState('states.startTime')]\n    );\n\n    // effect to end call\n    this.useEffect(\n      () => {\n        if (\n          this.getState('states.endTime')\n          && this.getState('states.voiceCallComplete')\n          && !this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallFinish)\n        ) {\n          this.setState({\n            endTime: moment(),\n            callState: VoiceCallModel.CALL_STATES.voiceCallFinish,\n          });\n        }\n      },\n      () => [this.getState('states.endTime'), this.getState('states.voiceCallComplete')]\n    );\n    this.state.once('onDestroy', () => {\n      this.isMounted = false;\n      this.stopNotifySession();\n\n      console.log('getCallState', this.getCallState());\n      if (\n        this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallConnecting)\n        || this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallIncomming)\n        || this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallIniting)\n      ) {\n        this.setState('states.voiceCallReject', true);\n      }\n    });\n  }\n\n  static create(data, opts) {\n    console.log('voice create');\n    const instance = new VoiceCallModel();\n    const id = _.get(data, 'data.session_id');\n\n    instance.set({ ...opts, msg: data, id });\n\n    this.instances.add(instance);\n    //\n    return instance;\n  }\n\n  static fromMessage(msg, ctx) {\n    const id = _.get(msg, 'data.session_id') || _.get(msg, 'id');\n    let instance = this.instances.get(id);\n    if (!instance) {\n      instance = this.create(msg);\n    }\n\n    const user_id = _.get(msg, 'data.user_id');\n\n    const advisor_id = _.get(msg, 'data.advisor_id');\n\n    const service_id = _.get(msg, 'data.service_id');\n\n    const session_id = _.get(msg, 'data.session_id');\n\n    if (user_id && advisor_id && service_id && session_id) {\n      instance.set({\n        user_id,\n        advisor_id,\n        service_id,\n        session_id,\n      });\n      instance.connectStore(ctx);\n    }\n\n    instance.ctx = ctx;\n\n    return instance;\n  }\n\n  static async fromSession({ user_id, advisor_id }) {\n    try {\n      const instance = await VoiceCallModel.create({ user_id, advisor_id });\n      await instance.createSession();\n      return instance;\n    } catch (err) {\n      console.log('ererer', err);\n    }\n  }\n\n  static fromCall(callData) {\n    try {\n      const instance = VoiceCallModel.create();\n      instance.set(callData);\n      return instance;\n    } catch (err) {\n      console.log('ererer', err);\n    }\n  }\n\n  connectStore(ctx) {\n    // store\n    const id = this.get('session_id');\n\n    const user_id = this.get('user_id');\n    const advisor_id = this.get('advisor_id');\n    const service_id = this.get('service_id');\n\n    this.state.enhance(\n      new VoiceCallState(\n        {\n          id,\n          user_id,\n          advisor_id,\n          service_id,\n        },\n        ctx\n      )\n    );\n\n    console.log('connectStore', ctx);\n  }\n\n  getSectionId() {\n    const msg = this.get('msg');\n    const id = _.get(msg, 'data.session_id');\n    return id;\n  }\n\n  getSectionToken() {\n    const msg = this.get('msg');\n    const token = _.get(msg, 'data.session_token');\n    return token;\n  }\n\n  getSectionKey() {\n    const msg = this.get('msg');\n    const key = _.get(msg, 'data.session_key');\n    return key;\n  }\n\n  async createSession(ctx) {\n    // return null;\n\n    this.setState({\n      msg: 'AdvisorVoiceCall.initingStatusTxt',\n    });\n\n    console.log('createSession', ctx);\n\n    try {\n      const user_id = this.get('user_id');\n      const advisor_id = this.get('advisor_id');\n      const service_id = this.get('service_id');\n      const purchase_id = this.get('purchase_id');\n\n      const params = {\n        user_id,\n        advisor_id,\n        service_id,\n        purchase_id,\n      };\n\n      const data = await fbFnsClient.getClient().post('tasks-createSession', params);\n\n      console.log({ data, params });\n\n      if (_.get(data, 'message.length', 0) > 0) {\n        return this.setState({\n          msg: { text: _.get(data, 'message') },\n        });\n      }\n      // await new Promise(res => setTimeout(res, 500));\n      // const data = {\"advisor_id\": \"9KGhxtVGdPMD4VRIuZw25Iwo8x33\", \"session_duration\": \"360\", \"session_id\": \"2_MX40NTc4ODY5Mn5-MTYxNjI5ODQ3MTM1Nn5EQlB3WHhOL1VSaGtWY2FsRkJrWnMrT01-fg\", \"session_key\": \"45788692\", \"session_token\": \"T1==cGFydG5lcl9pZD00NTc4ODY5MiZzaWc9OTBlNTZjMGMyNGEyMTkzZWY1Nzg5ZDZkNTIxOGZiMjBmMGRlNDYwMDpzZXNzaW9uX2lkPTJfTVg0ME5UYzRPRFk1TW41LU1UWXhOakk1T0RRM01UTTFObjVFUWxCM1dIaE9MMVZTYUd0V1kyRnNSa0pyV25NclQwMS1mZyZjcmVhdGVfdGltZT0xNjE2Mjk4NDgyJm5vbmNlPTAuMzQ2NzQ2Mjk1NTc0NzYwNDQmcm9sZT1wdWJsaXNoZXImZXhwaXJlX3RpbWU9MTYxNjkwMzEyMyZpbml0aWFsX2xheW91dF9jbGFzc19saXN0PQ==\", \"user_id\": \"9KGhxtVGdPMD4VRIuZw25Iwo8x33\"};\n      this.set('session_id', _.get(data, 'session_id'));\n\n      this.connectStore(ctx);\n      this.ctx = ctx;\n\n      this.set({ msg: { data } });\n      // update call state\n      this.setState({\n        msg: 'AdvisorVoiceCall.ringingStatusTxt',\n        callState: VoiceCallModel.CALL_STATES.voiceCallConnecting,\n      });\n\n      return data;\n    } catch (err) {\n      console.log('create session error', err);\n      this.setState({\n        msg: { text: err.toString() },\n      });\n    }\n  }\n\n  async notifySession() {\n    this.set({ stopNotifySession: false });\n\n    const msg = this.get('msg');\n\n    const notifId = _.get(msg, 'data.session_id');\n    this.set({ notifId, msg });\n    this.get('stream').emit('notify', msg);\n    this.watchNotifTimeout();\n  }\n\n  async stopNotifySession() {\n    this.set({ stopNotifySession: true });\n    this.get('stream').emit('stopNotify');\n  }\n\n  watchNotifTimeout() {\n    const notifId = this.get('notifId');\n    const watcherKey = `notifListener.${notifId}`;\n    if (!this.get(watcherKey)) {\n      const db = fibApp.getClient().firestore();\n      const docRef = db.collection('videocalls').doc(notifId);\n      const disposers = [];\n      disposers.push(\n        docRef.onSnapshot((docData) => {\n          const data = docData.data();\n          if (_.get(data, 'states.isNoAnswer')) {\n            this.stopNotifySession();\n          }\n        })\n      );\n\n      disposers.push(\n        this.get('stream').on('stopNotify', () => {\n          disposers.map((dis) => dis());\n          disposers.splice(0, disposers.length);\n        })\n      );\n      this.set(watcherKey, true);\n    }\n  }\n\n  /**\n   * handlers for VoiceCallModel\n   *\n   * @memberof VoiceCallModel\n   */\n  switchCamera() {\n    const cameraPositions = ['front', 'back'];\n    const cameraPosition = this.getState('cameraPosition');\n    const currIndex = _.indexOf(cameraPositions, cameraPosition);\n    const newPos = cameraPositions[(currIndex + 1) % cameraPositions.length];\n    this.setState('myState.cameraPosition', newPos);\n    this.setState({\n      cameraPosition: newPos,\n    });\n  }\n\n  toggleMic() {\n    this.setState('myState.micMute', !this.getState('myState.micMute'));\n  }\n\n  toggleVideo() {\n    this.setState('myState.videoMute', !this.getState('myState.videoMute'));\n  }\n\n  toggleVideoSubscriber() {\n    this.setState('remoteState.videoMute', !this.getState('remoteState.videoMute'));\n  }\n\n  collapseVideo() {\n    this.setState('myState.collapse', true);\n  }\n\n  separateVideo() {\n    this.setState('myState.collapse', false);\n  }\n\n  reConnecting() {\n    this.setState('myState.internetStatus', VoiceCallModel.INTERNET_STATES.reconnecting);\n  }\n\n  reConnected() {\n    this.setState('myState.internetStatus', VoiceCallModel.INTERNET_STATES.connected);\n  }\n\n  disConnected() {\n    if (this.getCallState() !== VoiceCallModel.CALL_STATES.voiceCallFinish) {\n      this.setState('myState.internetStatus', VoiceCallModel.INTERNET_STATES.disconnect);\n    }\n  }\n\n  isConnected() {\n    return (\n      this.useState('myState.internetStatus') === VoiceCallModel.INTERNET_STATES.connected\n      && this.useState('otherState.internetStatus') === VoiceCallModel.INTERNET_STATES.connected\n    );\n  }\n\n  isConnecting() {\n    return (\n      this.useState('myState.internetStatus') === VoiceCallModel.INTERNET_STATES.reconnecting\n      || this.useState('otherState.internetStatus') === VoiceCallModel.INTERNET_STATES.reconnecting\n    );\n  }\n\n  isDisconnected() {\n    return this.useState('myState.internetStatus') === VoiceCallModel.INTERNET_STATES.disconnect;\n  }\n\n  async startCall(peerId) {\n    this.setState({\n      callState: VoiceCallModel.CALL_STATES.voiceCallOnProgress,\n    });\n  }\n\n  takeCall() {\n    this.stopNotifySession();\n\n    this.setState({\n      callState: VoiceCallModel.CALL_STATES.voiceCallTaking,\n    });\n  }\n\n  startTimer() {\n    if (!this.getState('states.startTime')) {\n      this.setState('states.startTime', moment().valueOf());\n    }\n    this.setState({\n      startTime: moment(this.getState('states.startTime')),\n    });\n  }\n\n  endCall() {\n    if (\n      this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallConnecting)\n      || this.hasCallState(VoiceCallModel.CALL_STATES.voiceCallIncomming)\n    ) {\n      this.setState('states.voiceCallReject', true);\n\n      return;\n    }\n\n    this.setState('states.endTime', moment().valueOf());\n    this.setState('states.voiceCallComplete', true);\n  }\n\n  startIncomingCall() {\n    this.setState({\n      callState: VoiceCallModel.CALL_STATES.voiceCallIncomming,\n    });\n  }\n\n  rejectCall() {\n    // try to go to previous screen\n    // routes.goBack();\n    this.setState('states.voiceCallReject', true);\n  }\n\n  /**\n   * getter for VoiceCallModel\n   *\n   * @returns\n   * @memberof VoiceCallModel\n   */\n  getCallState() {\n    const callState = this.useState('callState');\n    console.log('---hasCallState', callState);\n    return callState;\n  }\n\n  hasCallState(state) {\n    return this.getCallState() === state;\n  }\n\n  getCallDuration() {\n    const startTime = this.useState('startTime');\n    if (!startTime) return '';\n\n    const now = moment();\n    const duration = moment.duration(now.diff(startTime));\n    return durationFormatter(duration.asMilliseconds()); // `${_.padStart(duration.minutes(), 2, '0')}:${_.padStart(duration.seconds(), 2, '0')}`;\n  }\n\n  getCallDurationTotal(format = 'MM') {\n    const startTime = this.getState('startTime');\n    const endTime = this.getState('endTime');\n    if (!startTime || !endTime) return '';\n\n    const duration = moment.duration(endTime.diff(startTime));\n    return durationFormatter(duration.asMilliseconds()); // `${_.padStart(duration.minutes(), 2, '0')}:${_.padStart(duration.seconds(), 2, '0')}`;\n  }\n\n  getCallMaxDuration() {\n    const msg = this.get('msg');\n    const durationSecondsStr = _.get(msg, 'data.session_duration');\n    const duration = moment.duration(durationSecondsStr, 'seconds');\n\n    return durationFormatter(duration.asMilliseconds()); // `${_.padStart(duration.minutes(), 2, '0')}:${_.padStart(duration.seconds(), 2, '0')}`;\n  }\n\n  static async onForegroundEvent(ev) {\n    const { type, detail } = ev;\n    // if (type === EventType.ACTION_PRESS) {\n    //   const action = _.get(detail, 'pressAction.id');\n    //   const msg = _.get(detail, 'notification');\n    //   const instance = await VoiceCallModel.fromMessage(msg);\n    //   if (instance) {\n    //     const handlers = instance.get('actions');\n    //     const handler = _.get(handlers, [action]);\n    //     if (_.isFunction(handler)) handler(msg);\n    //   }\n    // }\n  }\n\n  static async onBackgroundEvent(ev) {\n    const { type, detail } = ev;\n    // if (type === EventType.ACTION_PRESS) {\n    //   console.log('type, detail', type, detail.pressAction);\n    // } else {\n    //   console.log('tyatyatya', type);\n    // }\n  }\n}\n\n// graphme.model({ VoiceCallModel });\n\nexport default VoiceCallModel;\n","import View from './View.js';\nimport Data from './Data.js';\n\nexport default Data(View);\n","import { bindings, hook } from '@vl/redata';\nimport VoiceCallModel from '@uz/unitz-models/VoiceCallWebModel';\n\nconst bindData = bindings({\n  voiceComponent: {\n    rules: [\n      [\n        'data',\n        {\n          data: {},\n        },\n      ],\n    ],\n  },\n  voiceCallIniting: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallIniting)),\n        },\n      ],\n    ],\n  },\n  voiceCallConnecting: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallConnecting)),\n        },\n      ],\n    ],\n  },\n  voiceCallIncomming: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallIncomming)),\n        },\n      ],\n    ],\n  },\n  voiceCallTaking: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallTaking)),\n        },\n      ],\n    ],\n  },\n  voiceCallOnProgress: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook(\n            (ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallOnProgress)\n              && ctx.apply('voiceCallModel.isConnected')\n          ),\n        },\n      ],\n    ],\n  },\n\n  voiceCallOnProgressOffCamera: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook(\n            (ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallOnProgress)\n              && !(\n                ctx.apply('voiceCallModel.useState', 'remoteState.voiceMute') && ctx.apply('voiceCallModel.isConnected')\n              )\n          ),\n        },\n      ],\n    ],\n  },\n\n  voiceCallDisconnect: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook(\n            (ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallFinish)\n              && ctx.apply('voiceCallModel.isDisconnected')\n          ),\n        },\n      ],\n    ],\n  },\n\n  sessionReconnect: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('voiceCallModel.isConnecting')),\n        },\n      ],\n    ],\n  },\n\n  callSession: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => !ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallFinish)),\n        },\n      ],\n    ],\n  },\n});\n\nexport default bindData;\n","import React from 'react';\n\nimport DIV from '@vl/redata/DIV.macro';\n\nimport VoiceCall from '@uz/unitz-components-web/VoiceCall';\nimport { SectionVoiceCallActions } from '@uz/unitz-components-web/VoiceCall/components';\nimport { ctx } from '@vl/redata';\n\nconst Index = () => {\n  return (\n    <DIV className=\"voicePage\">\n      <div\n        ref={ctx.apply('LAYOUT.onLayout', 'AdvisorVoiceCallStatus')}\n        className=\"fixed top-0 left-0 z-10 w-screen h-screen bg-gray-400\"\n      >\n        <VoiceCall />\n        <DIV className=\"sectionVoiceActions\">\n          <SectionVoiceCallActions />\n        </DIV>\n      </div>\n    </DIV>\n  );\n};\n\nexport default Index;\n","\nexport const formatter = {\n  getTokboxConfig: () => (videoCallModel) => {\n    const state = {};\n    return {\n      apiKey: videoCallModel.getSectionKey(),\n      sessionId: videoCallModel.getSectionId(),\n      token: videoCallModel.getSectionToken(),\n\n      signal: {\n        data: 'data',\n        type: 'init',\n        to: ''\n      },\n      ref: (ref) => {\n        state.ref = ref;\n      },\n\n      eventHandlers: {\n        sessionConnected: (ev) => {\n          console.log('sessionConnected, caller', ev);\n          // ref.current.connection = ev.connection;\n          setInterval(() => {\n            state.ref && state.ref.signal({ type: 'healthcheck' });\n          }, 5000);\n        },\n        sessionDisconnected: (ev) => {\n          console.log('disconnected', ev, ev.connectionId);\n          videoCallModel.disConnected();\n        },\n        sessionReconnected: (ev) => {\n          console.log('sessionReconnected', ev);\n          videoCallModel.reConnected();\n        },\n        sessionReconnecting: (ev) => {\n          console.log('sessionReconnecting', ev);\n          videoCallModel.reConnecting();\n        },\n        streamCreated: (ev) => {\n          console.log('streamCreated', ev);\n          videoCallModel.startCall(ev.connectionId);\n          videoCallModel.startTimer();\n        },\n        connectionCreated: (ev) => {\n          // _.set(ref.current.peerIds, ev.connectionId, ev.connectionId);\n          // on peer connect, change callstate to ongoing\n          console.log('connectionCreated', ev.connectionId);\n          videoCallModel.startCall(ev.connectionId);\n          videoCallModel.startTimer();\n        },\n        connectionDestroyed: (ev) => {\n          console.log('connectionDestroyed', ev);\n          // ref.current.peerIds[ev.connectionId] = null;\n          // auto end call\n          // if(!_.compact(_.values(ref.current.peerIds)).length) {\n          videoCallModel.endCall();\n          // }\n        },\n        signal: (ev) => {\n          console.log('signal', ev);\n        }\n      }\n    };\n  },\n\n  getTokboxSubscriberConfig: () => (videoCallModel) => {\n    const state = {};\n    return {\n      eventHandlers: {\n        videoDisabled: (...args) => {\n          videoCallModel.toggleVideoSubscriber();\n        },\n        videoEnabled: (...args) => {\n          videoCallModel.toggleVideoSubscriber();\n        }\n      }\n    };\n  }\n};\n\nexport default formatter;\n","import React from 'react';\nimport { bindings, hook } from '@vl/redata';\nimport _ from 'lodash';\nimport VoiceCallModel from '@uz/unitz-models/VoiceCallWebModel';\nimport VoiceCallFormatter from '@uz/unitz-models/VoiceCallWebModel/formatter';\nimport PurchaseModel from '@uz/unitz-models/PurchaseModel';\nimport AdvisorModel from '@uz/unitz-models/AdvisorModel';\nimport AdvisorProfileFormatter from '@uz/unitz-models/AdvisorProfileModel/formatter';\nimport CFAdvisorProfileFormatter from '@uz/unitz-models/CFAdvisorProfileModel/formatter';\nimport usePromiseSource from '@vl/hooks/usePromiseSource';\nimport { formatVND } from '@vl/mod-utils/currencyFormatter';\nimport useRoute from '@vl/hooks/useGbRoute';\n\nconst bindData = bindings({\n  voicePage: {\n    rules: [\n      [\n        'data',\n        {\n          data: {\n            '@params': hook((ctx) => {\n              const route = useRoute();\n              const routeParams = _.get(route, 'params', {});\n              const advisor_id = _.get(routeParams, 'id');\n              const service_id = _.get(routeParams, 'service_id', '');\n              const purchase_id = _.get(routeParams, 'purchase_id', '');\n              const user_id = ctx.apply('authModel.getUserId');\n              const callParams = {\n                advisor_id,\n                service_id,\n                user_id,\n                purchase_id,\n              };\n              return callParams;\n            }),\n            voiceCallModel: hook((ctx) => {\n              const advisor_id = ctx.get('@params.advisor_id');\n              const voiceCallModel = React.useMemo(() => {\n                const voiceCallModel = VoiceCallModel.fromCall(ctx.get('@params'), ctx);\n                voiceCallModel.createSession(ctx);\n                return voiceCallModel;\n              }, [advisor_id]);\n              voiceCallModel.hookState();\n\n              // check call rejected\n              voiceCallModel.useEffect(\n                () => {\n                  if (voiceCallModel.getState('states.voiceCallReject')) {\n                    ctx.apply('@page.onCompleted', 'rejected');\n                  }\n                },\n                () => [voiceCallModel.getState('states.voiceCallReject')]\n              );\n\n              // check call no answer\n              voiceCallModel.useEffect(\n                () => {\n                  if (voiceCallModel.getState('states.isNoAnswer')) {\n                    ctx.apply('@page.onCompleted', 'missed');\n                  }\n                },\n                () => [voiceCallModel.getState('states.isNoAnswer')]\n              );\n\n              // check call finish\n              voiceCallModel.useEffect(\n                () => {\n                  if (voiceCallModel.hasCallState(VoiceCallModel.CALL_STATES.voiceCallFinish)) {\n                    ctx.apply('@page.onCompleted', 'completed');\n                  }\n                },\n                () => [voiceCallModel.getCallState()]\n              );\n\n              return voiceCallModel;\n            }),\n\n            tokbox: hook((ctx) => {\n              const voiceCallModel = ctx.get('voiceCallModel');\n              const tokboxConfig = VoiceCallFormatter.getTokboxConfig(ctx)(voiceCallModel);\n              return tokboxConfig;\n            }),\n\n            tokboxSubscriber: hook((ctx) => {\n              const voiceCallModel = ctx.get('voiceCallModel');\n              const tokboxConfig = VoiceCallFormatter.getTokboxSubscriberConfig(ctx)(voiceCallModel);\n              return tokboxConfig;\n            }),\n\n            '@items': hook((ctx) => {\n              const { advisor_id, service_id, user_id } = ctx.get('@params');\n\n              const advisor = usePromiseSource(\n                async () => {\n                  if (!advisor_id) return null;\n                  try {\n                    const profile = await AdvisorModel.find(\n                      `where: {id: {_eq:\"${advisor_id}\"}}`,\n                      `services(where: {id: {_eq: \"${service_id}\"}}) {\n                        price {\n                          per_unit\n                          per_amount\n                          price_currency\n                          price_amount\n                        \n                          \n                        }\n                        id\n                        service {\n                          id\n                          name\n                          \n                        }\n                      }\n                      profile {\n                        id\n                        display_name\n                        avatar_url\n                        created_at\n                      }\n                      reviews {\n                        id\n                        review_text\n                        score\n                        updated_at\n                        author {\n                          profile {\n                            avatar_url\n                            display_name\n                            id\n                          }\n                        }\n                      } review_agg {\n                        avg_score\n                      } `\n                    );\n                    return profile.toObject();\n                  } catch (err) {}\n                },\n                null,\n                [advisor_id]\n              );\n\n              const item = _.get(advisor, '0');\n              const service = _.get(advisor, '0.services.0');\n              const advisorProfile = _.get(advisor, '0.profile');\n\n              return {\n                id: advisor_id,\n                service_id,\n                advisorProfile: {\n                  id: AdvisorProfileFormatter.profileId(ctx)(advisorProfile),\n                  displayName: AdvisorProfileFormatter.displayName(ctx)(advisorProfile),\n                  avatarUrl: AdvisorProfileFormatter.avatarUrl(ctx)(advisorProfile),\n                  rating: {\n                    ratingText: AdvisorProfileFormatter.reviewText(ctx)(item),\n                    ratingScore: AdvisorProfileFormatter.reviewScore(ctx)(item),\n                  },\n                  // createdAtTxt: AdvisorProfileFormatter.createdAt(ctx)(advisor),\n                },\n                price: {\n                  pricePerMinTxt: AdvisorProfileFormatter.pricePerMin(ctx)(service),\n                  pricePerMinTitle: AdvisorProfileFormatter.pricePerMinTitle(ctx)(service),\n                },\n              };\n            }),\n            isCalling: hook((ctx) => {\n              return ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallOnProgress);\n            }),\n            '@page': hook((ctx) => {\n              const route = useRoute();\n              return {\n                onCompleted: (status) => {\n                  const voiceCallModel = ctx.get('voiceCallModel');\n                  const session_id = voiceCallModel.getSectionId();\n                  const { purchase_id, advisor_id } = ctx.get('@params');\n                  const params = {\n                    advisor_id,\n                    purchase_id,\n                    session_id,\n                    step: 'completed',\n                    status: status || 'completed',\n                  };\n                  // Change URL\n                  const toUrl = route.redirectUrl(params, { origin: false });\n                  route.navigate(toUrl, {\n                    relace: true,\n                    state: { purchase_id },\n                  });\n                  // Change Step\n                  route.setRouteState(params);\n                  ctx.apply('stepModel.setStep', params.step);\n                },\n              };\n            }),\n            purchaseData: hook((ctx) => {\n              const { purchase_id } = ctx.get('@params');\n              const purchaseData = usePromiseSource(\n                async () => {\n                  if (!purchase_id) return null;\n                  try {\n                    const purchase = await PurchaseModel.find(\n                      `where: {id: {_eq: \"${purchase_id}\"}}`,\n                      `\n                      services {\n                        id\n                        price_amount\n                      }\n                      discounts {\n                        currency\n                        percentage\n                        amount\n                        id\n                        type\n                      }\n                      `\n                    );\n                    return purchase.toObject();\n                  } catch (err) {}\n                },\n                null,\n                [purchase_id]\n              );\n              const bill = CFAdvisorProfileFormatter.amountPayment(ctx)({\n                price: { price_amount: _.get(purchaseData, '0.services.0.price_amount') },\n                discounts: _.get(purchaseData, '0.discounts'),\n              });\n              return {\n                totalAfter: _.get(bill, 'totalAfter') ? formatVND(_.get(bill, 'totalAfter')) : 0,\n                totalBefore: _.get(bill, 'totalBefore') ? formatVND(_.get(bill, 'totalBefore')) : 0,\n                discount: _.get(bill, 'discount') ? formatVND(_.get(bill, 'discount')) : 0,\n              };\n              // return items;\n            }),\n          },\n        },\n      ],\n    ],\n  },\n  sectionVoiceActions: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => {\n            return (\n              true\n              || ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallConnecting)\n              || ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallOnProgress)\n            );\n          }),\n        },\n      ],\n    ],\n  },\n  voiceCallFinish: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('voiceCallModel.hasCallState', VoiceCallModel.CALL_STATES.voiceCallFinish)),\n        },\n      ],\n      [\n        'data',\n        {\n          data: {},\n        },\n      ],\n    ],\n  },\n  isLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n  notLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => !ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n});\n\nexport default bindData;\n","import View from './View.js';\nimport Data from './Data.js';\n\nexport default Data(View);\n","import React from 'react';\n\nimport DIV from '@vl/redata/DIV.macro';\nimport VoiceCallCompleted from '@uz/unitz-pages/VoiceCallCompleted';\nimport VoicePage from '@uz/unitz-pages/VoiceCall';\nimport PaymentPage from '@uz/unitz-pages/Payment';\nimport PaymentConfirm from '@uz/unitz-pages/PaymentConfirm';\nimport { UnAuthRedirect } from '@uz/unitz-components-web/AppRedirect';\n\nconst Index = () => {\n  return (\n    <UnAuthRedirect to={'/login'}>\n      <DIV className=\"serviceSessionPage\">\n        <DIV className=\"paymentStep\">\n          <PaymentPage />\n        </DIV>\n        <DIV className=\"confirmStep\">\n          <PaymentConfirm />\n        </DIV>\n        <DIV className=\"serviceStep\">\n          <VoicePage />\n        </DIV>\n        <DIV className=\"completedStep\">\n          <VoiceCallCompleted />\n        </DIV>\n      </DIV>\n    </UnAuthRedirect>\n  );\n};\n\nexport default Index;\n","import React from 'react';\nimport { bindings, hook } from '@vl/redata';\n\nimport _ from 'lodash';\nimport useRoute from '@vl/hooks/useGbRoute';\n\nconst STEP_LIST = ['payment', 'confirm', 'cancel', 'service', 'completed'];\n\nconst STEP_LIST_BY_NAME = {};\n_.map(STEP_LIST, (val, index) => (STEP_LIST_BY_NAME[val] = index));\n\nconst bindData = bindings({\n  serviceSessionPage: {\n    rules: [\n      [\n        'data',\n        {\n          data: {\n            stepModel: hook((ctx) => {\n              const route = useRoute();\n              const routeParams = _.get(route, 'params', {});\n              const step = _.get(routeParams, 'step', _.first(STEP_LIST));\n\n              const [currentStep, $currentStep] = React.useState(step);\n              React.useEffect(() => {\n                if (currentStep !== step) {\n                  $currentStep(step);\n                }\n              }, [currentStep, $currentStep, step]);\n\n              return {\n                currentStep,\n                setStep: (newStep) => _.has(STEP_LIST_BY_NAME, newStep) && $currentStep(newStep),\n                hasNext: () => {},\n                nextStep: () => {},\n                prevStep: () => {},\n                handlers: {\n                  callAgain: () => {\n                    const params = {\n                      step: 'confirm',\n                      status: undefined,\n                    };\n                    // Change URL\n                    const toUrl = route.redirectUrl(params, { origin: false });\n                    route.navigate(toUrl, {\n                      relace: true,\n                    });\n                    // Change Step\n                    route.setRouteState(params);\n                    ctx.apply('stepModel.setStep', params.step);\n                  },\n                  callFinish: () => {\n                    // Change URL\n                    const toUrl = ctx.apply('routeStore.toUrl', 'advisor', routeParams);\n                    route.navigateExternal(toUrl);\n                  },\n                },\n              };\n            }),\n          },\n        },\n      ],\n    ],\n  },\n  paymentStep: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.get('stepModel.currentStep') === STEP_LIST[0]),\n        },\n      ],\n    ],\n  },\n  confirmStep: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook(\n            (ctx) => _.get(useRoute(), 'params.purchase_id') && ctx.get('stepModel.currentStep') === STEP_LIST[1]\n          ),\n        },\n      ],\n    ],\n  },\n  serviceStep: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook(\n            (ctx) => _.get(useRoute(), 'params.purchase_id') && ctx.get('stepModel.currentStep') === STEP_LIST[3]\n          ),\n        },\n      ],\n    ],\n  },\n  completedStep: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook(\n            (ctx) => _.get(useRoute(), 'params.purchase_id') && ctx.get('stepModel.currentStep') === STEP_LIST[4]\n          ),\n        },\n      ],\n    ],\n  },\n  isLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n  notLoading: {\n    rules: [\n      [\n        'display',\n        {\n          display: hook((ctx) => !ctx.apply('loadingModel.isLoading')),\n        },\n      ],\n    ],\n  },\n});\n\nexport default bindData;\n","import View from './View.js';\nimport Data from './Data.js';\n\nexport default Data(View);\n","import React from 'react';\n\nimport { ctx } from '@vl/redata';\nimport DIV from '@vl/redata/DIV.macro';\n\nimport App from '@uz/unitz-app-web/UserApp';\nimport VoiceServiceSession from '@uz/unitz-pages/VoiceServiceSession';\n\nimport SEO from '@uz/unitz-layout-web/SEO';\n\nimport Layout from '@uz/unitz-layout-web/LayoutMain';\nimport withPageContext from '@uz/unitz-pages/withPageContext';\n\nimport PageData from '../../data/PageDataQuery';\n\nexport const component = withPageContext((props) => {\n  return (\n    <App>\n      <Layout location={props.location} PageData={PageData}>\n        <DIV>\n          <SEO pageData={ctx.apply('ctf.findPage', { name: 'Homepage' })} />\n          <Layout.POS name=\"app-header\">{ctx.apply('ctf.renderSection', { name: 'articleNavbarSection' })}</Layout.POS>\n          <Layout.POS name=\"app-body\">\n            <div className=\"wrapper app-row\">\n              <div className=\"relative overflow-hidden\">\n                <VoiceServiceSession />\n              </div>\n            </div>\n          </Layout.POS>\n          <Layout.POS name=\"app-footer\">{ctx.apply('ctf.renderSection', { name: 'articleFooterSection' })}</Layout.POS>\n        </DIV>\n      </Layout>\n    </App>\n  );\n});\n\nexport default component;\n"],"sourceRoot":""}